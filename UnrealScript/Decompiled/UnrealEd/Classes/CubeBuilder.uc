/*******************************************************************************
 * CubeBuilder generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class CubeBuilder extends BrushBuilder
    native
    hidecategories(Object,BrushBuilder);

var() float X<ClampMin=0.000001>;
var() float Y<ClampMin=0.000001>;
var() float Z<ClampMin=0.000001>;
var() float WallThickness;
var() name GroupName;
var() bool Hollow;
var() bool Tessellated;

function BuildCube(int Direction, float DX, float DY, float dz, bool _tessellated)
{
    local int N, I, J, K;

    N = GetVertexCount();
    I = -1;
    J0x23:

    if(I < 2)
    {
        J = -1;
        J0x42:

        if(J < 2)
        {
            K = -1;
            J0x61:

            if(K < 2)
            {
                Vertex3f((float(I) * DX) / float(2), (float(J) * DY) / float(2), (float(K) * dz) / float(2));
                K += 2;
                goto J0x61;
            }
            J += 2;
            goto J0x42;
        }
        I += 2;
        goto J0x23;
    }
    if(_tessellated)
    {
        Poly3i(Direction, N + 0, N + 1, N + 3);
        Poly3i(Direction, N + 0, N + 3, N + 2);
        Poly3i(Direction, N + 2, N + 3, N + 7);
        Poly3i(Direction, N + 2, N + 7, N + 6);
        Poly3i(Direction, N + 6, N + 7, N + 5);
        Poly3i(Direction, N + 6, N + 5, N + 4);
        Poly3i(Direction, N + 4, N + 5, N + 1);
        Poly3i(Direction, N + 4, N + 1, N + 0);
        Poly3i(Direction, N + 3, N + 1, N + 5);
        Poly3i(Direction, N + 3, N + 5, N + 7);
        Poly3i(Direction, N + 0, N + 2, N + 6);
        Poly3i(Direction, N + 0, N + 6, N + 4);        
    }
    else
    {
        Poly4i(Direction, N + 0, N + 1, N + 3, N + 2);
        Poly4i(Direction, N + 2, N + 3, N + 7, N + 6);
        Poly4i(Direction, N + 6, N + 7, N + 5, N + 4);
        Poly4i(Direction, N + 4, N + 5, N + 1, N + 0);
        Poly4i(Direction, N + 3, N + 1, N + 5, N + 7);
        Poly4i(Direction, N + 0, N + 2, N + 6, N + 4);
    }
}

event bool Build()
{
    if(((Z <= float(0)) || Y <= float(0)) || X <= float(0))
    {
        return BadParameters();
    }
    if(Hollow && (((Z / 2) <= WallThickness) || (Y / 2) <= WallThickness) || (X / 2) <= WallThickness)
    {
        return BadParameters();
    }
    if(Hollow && Tessellated)
    {
        return BadParameters("The 'Tessellated' option can't be specified with the 'Hollow' option.");
    }
    BeginBrush(false, GroupName);
    BuildCube(1, X, Y, Z, Tessellated);
    if(Hollow)
    {
        BuildCube(-1, X - (WallThickness * 2), Y - (WallThickness * 2), Z - (WallThickness * 2), Tessellated);
    }
    return EndBrush();
}

defaultproperties
{
    X=256
    Y=256
    Z=256
    WallThickness=16
    GroupName=Cube
    BitmapFilename="Btn_Box"
    ToolTip="BrushBuilderName_Cube"
}