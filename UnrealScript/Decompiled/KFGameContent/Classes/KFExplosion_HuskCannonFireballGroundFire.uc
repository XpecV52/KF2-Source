/*******************************************************************************
 * KFExplosion_HuskCannonFireballGroundFire generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFExplosion_HuskCannonFireballGroundFire extends KFExplosion_HuskFireballGroundFire
    config(Weapon)
    hidecategories(Navigation);

struct CachedExplosionInfo
{
    var GameExplosion ExplosionTemplate;
    var Vector Direction;

    structdefaultproperties
    {
        ExplosionTemplate=none
        Direction=(X=0,Y=0,Z=0)
    }
};

var CachedExplosionInfo CachedExplosion;
var float ExplosionDelay;

simulated function Explode(GameExplosion NewExplosionTemplate, optional Vector Direction)
{
    if(ExplosionDelay > float(0))
    {
        CachedExplosion.ExplosionTemplate = NewExplosionTemplate;
        CachedExplosion.Direction = Direction;
        SetTimer(ExplosionDelay, false, 'Timer_DelayExplosion');        
    }
    else
    {
        super(KFExplosionActorLingering).Explode(NewExplosionTemplate, Direction);
    }
}

simulated function Timer_DelayExplosion()
{
    Explode(CachedExplosion.ExplosionTemplate, CachedExplosion.Direction);
}

defaultproperties
{
    LoopingParticleEffect=ParticleSystem'WEP_HuskCannon_EMIT.FX_Huskcannon_groundfire_L3'
}