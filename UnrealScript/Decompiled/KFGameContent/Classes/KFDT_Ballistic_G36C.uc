/*******************************************************************************
 * KFDT_Ballistic_G36C generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFDT_Ballistic_G36C extends KFDT_Ballistic_AssaultRifle
    abstract;

var ParticleSystem MetalImpactEffect;
var AkEvent MetalImpactSound;

static function PlayImpactHitEffects(KFPawn P, Vector HitLocation, Vector HitDirection, byte HitZoneIndex, optional Pawn HitInstigator)
{
    local KFSkinTypeEffects SkinType, OriginalSkinType, FleshSkinType;
    local int I;

    if((P.CharacterArch != none) && default.EffectGroup < 22)
    {
        I = 0;
        J0x46:

        if(I < P.CharacterArch.ImpactSkins.Length)
        {
            if((P.CharacterArch.ImpactSkins[I].Name == 'Flesh') || P.CharacterArch.ImpactSkins[I].Name == 'Tough_Flesh')
            {
                FleshSkinType = P.CharacterArch.ImpactSkins[I];
                goto J0x1A2;
            }
            ++ I;
            goto J0x46;
        }
        J0x1A2:

        SkinType = P.GetHitZoneSkinTypeEffects(HitZoneIndex);
        OriginalSkinType = SkinType;
        if((((SkinType != none) && SkinType.Name != 'Flesh') && SkinType.Name != 'Tough_Flesh') && SkinType.Name != 'ShieldEffects')
        {
            SkinType = none;
            if(FleshSkinType != none)
            {
                SkinType = FleshSkinType;
            }
        }
        if((OriginalSkinType != none) && (OriginalSkinType.Name == 'Metal') || OriginalSkinType.Name == 'Machine')
        {
            OriginalSkinType.PlayImpactParticleEffect(P, HitLocation, HitDirection, HitZoneIndex, default.EffectGroup, default.MetalImpactEffect);
            OriginalSkinType.PlayTakeHitSound(P, HitLocation, HitInstigator, default.EffectGroup, default.MetalImpactSound);
        }
        if(SkinType != none)
        {
            SkinType.PlayImpactParticleEffect(P, HitLocation, HitDirection, HitZoneIndex, default.EffectGroup);
            SkinType.PlayTakeHitSound(P, HitLocation, HitInstigator, default.EffectGroup);
        }
    }
}

defaultproperties
{
    MetalImpactEffect=ParticleSystem'FX_Impacts_EMIT.FX_Wep_Impact_MetalArmor_E'
    MetalImpactSound=AkEvent'WW_Skin_Impacts.Play_Slashing_Metal_3P'
    WeaponDef=Class'KFGame.KFWeapDef_G36C'
    StumblePower=15
    ModifierPerkList=/* Array type was not detected. */
    DamageModifierAP=0.8
    ArmorDamageModifier=15
    KDamageImpulse=900
    KDeathVel=100
    KDeathUpKick=-300
}