/*******************************************************************************
 * KFProj_GroundFire generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFProj_GroundFire extends KFProjectile
    hidecategories(Navigation);

var() float BurnDamageInterval;

function WarnAI(Vector Direction)
{
    local KFPawn_Monster KFPM;
    local Vector DangerPoint;

    DangerPoint = Location;
    foreach VisibleCollidingActors(Class'KFPawn_Monster', KFPM, 300, Location, true)
    {
        if((KFPM.MyKFAIC != none) && KFPM.IsAliveAndWell())
        {
            DangerPoint.Z = KFPM.Location.Z;
            KFPM.MyKFAIC.ReceiveLocationalWarning(DangerPoint, Location, self);
        }        
    }    
}

simulated event ReplicatedEvent(name VarName)
{
    if(VarName == 'bHasExploded')
    {
        return;        
    }
    else
    {
        super.ReplicatedEvent(VarName);
    }
}

simulated function PostBeginPlay()
{
    local KFPlayerReplicationInfo InstigatorPRI;

    InstigatorPRI = KFPlayerReplicationInfo(Instigator.PlayerReplicationInfo);
    if(InstigatorPRI != none)
    {
        bAltExploEffects = InstigatorPRI.bSplashActive;
    }
    TriggerExplosion(Location, vector(Rotation), none);
    super.PostBeginPlay();
}

simulated event Touch(Actor Other, PrimitiveComponent OtherComp, Vector HitLocation, Vector HitNormal);

protected simulated function PrepareExplosionActor(GameExplosionActor GEA)
{
    local KFExplosionActorLingering KFE_GroundFire;

    KFE_GroundFire = KFExplosionActorLingering(GEA);
    if(KFE_GroundFire != none)
    {
        KFE_GroundFire.interval = BurnDamageInterval;
    }
}

protected simulated function PrepareExplosionTemplate()
{
    ExplosionTemplate.bIgnoreInstigator = true;
    if(bAltExploEffects)
    {
        ExplosionTemplate.ExplosionEffects = AltExploEffects;
    }
}

defaultproperties
{
    BurnDamageInterval=0.25
    bAutoStartAmbientSound=true
    ExplosionActorClass=Class'KFExplosion_GroundFire'
    begin object name=ExploTemplate0 class=KFGameExplosion
        ExplosionEffects=KFImpactEffectInfo'WEP_Flamethrower_ARCH.GroundFire_Impacts'
        bAllowPerMaterialFX=true
        Damage=15
        DamageRadius=200
        MyDamageType=Class'KFGame.KFDT_Fire_Ground'
        KnockDownStrength=0
        MomentumTransferScale=0
        ExploLight=PointLightComponent'Default__KFProj_GroundFire.FlamePointLight'
        ExploLightFadeOutTime=0.5
        ExploLightStartFadeOutTime=1.5
        ExploLightFlickerIntensity=5
        ExploLightFlickerInterpSpeed=15
        FractureMeshRadius=0
        FracturePartVel=0
        CamShake=none
    object end
    // Reference: KFGameExplosion'Default__KFProj_GroundFire.ExploTemplate0'
    ExplosionTemplate=ExploTemplate0
    PostExplosionLifetime=2.5
    AltExploEffects=KFImpactEffectInfo'WEP_Flamethrower_ARCH.GroundFire_Splash_Impacts'
    begin object name=AmbientAkSoundComponent class=AkComponent
        bStopWhenOwnerDestroyed=true
        bForceOcclusionUpdateInterval=true
        OcclusionUpdateInterval=0.25
    object end
    // Reference: AkComponent'Default__KFProj_GroundFire.AmbientAkSoundComponent'
    AmbientComponent=AmbientAkSoundComponent
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_GroundFire.CollisionCylinder'
    CylinderComponent=CollisionCylinder
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_GroundFire.CollisionCylinder'
    Components(0)=CollisionCylinder
    begin object name=AmbientAkSoundComponent class=AkComponent
        bStopWhenOwnerDestroyed=true
        bForceOcclusionUpdateInterval=true
        OcclusionUpdateInterval=0.25
    object end
    // Reference: AkComponent'Default__KFProj_GroundFire.AmbientAkSoundComponent'
    Components(1)=AmbientAkSoundComponent
    RemoteRole=ENetRole.ROLE_None
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_GroundFire.CollisionCylinder'
    CollisionComponent=CollisionCylinder
}