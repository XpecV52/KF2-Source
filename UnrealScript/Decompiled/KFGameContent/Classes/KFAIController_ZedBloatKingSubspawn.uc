/*******************************************************************************
 * KFAIController_ZedBloatKingSubspawn generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFAIController_ZedBloatKingSubspawn extends KFAIController_Monster
    config(AI)
    hidecategories(Navigation);

var const float ExplosionRadiusSq;
var KFPawn_ZedBloatKingSubspawn PoopPawn;

event Possess(Pawn inPawn, bool bVehicleTransition)
{
    super.Possess(inPawn, bVehicleTransition);
    PoopPawn = KFPawn_ZedBloatKingSubspawn(inPawn);
}

simulated function Tick(float DeltaTime)
{
    super(KFAIController).Tick(DeltaTime);
    if(Role == ROLE_Authority)
    {
        CheckMeleeTargetExplosion();
    }
}

function bool CanDoStrike()
{
    return false;
}

function CheckMeleeTargetExplosion()
{
    local Vector ToTarget;

    if((Enemy == none) || PoopPawn.IsDoingSpecialMove(40))
    {
        return;
    }
    ToTarget = Enemy.Location - MyKFPawn.Location;
    if(VSizeSq(ToTarget) < ExplosionRadiusSq)
    {
        if(PoopPawn != none)
        {
            Class'AICommand_BloatKingSubspawn_Explode'.static.StartExplode(self);
        }
    }
}

defaultproperties
{
    ExplosionRadiusSq=62500
    bEvadeOnRunOverWarning=true
    bIsProbingMeleeRangeEvents=true
    SprintWithinEnemyRange=(X=600,Y=1200)
}