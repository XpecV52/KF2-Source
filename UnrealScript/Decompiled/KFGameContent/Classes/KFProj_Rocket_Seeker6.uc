/*******************************************************************************
 * KFProj_Rocket_Seeker6 generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFProj_Rocket_Seeker6 extends KFProj_BallisticExplosive
    hidecategories(Navigation);

var private KFPawn LockedTarget;
var const float SeekStrength;

replication
{
     if(bNetInitial)
        LockedTarget;
}

function SetLockedTarget(KFPawn NewTarget)
{
    LockedTarget = NewTarget;
}

simulated event Tick(float DeltaTime)
{
    local Vector TargetImpactPos, DirToTarget;

    super(Actor).Tick(DeltaTime);
    if(((((!bHasExploded && LockedTarget != none) && Physics == 6) && Velocity != vect(0, 0, 0)) && LockedTarget.IsAliveAndWell()) && (WorldInfo.TimeSeconds - CreationTime) > 0.03)
    {
        TargetImpactPos = Class'KFWeap_RocketLauncher_Seeker6'.static.GetLockedTargetLoc(LockedTarget);
        Speed = VSize(Velocity);
        DirToTarget = Normal(TargetImpactPos - Location);
        Velocity = Normal(Velocity + (DirToTarget * (SeekStrength * DeltaTime))) * Speed;
        SetRotation(rotator(Velocity));
    }
}

defaultproperties
{
    SeekStrength=928000
    ArmDistSquared=110000
    ProjDudTemplate=ParticleSystem'WEP_SeekerSix_EMIT.FX_SeekerSix_Projectile_Dud'
    GrenadeBounceEffectInfo=KFImpactEffectInfo'wep_rpg7_arch.RPG7_Projectile_Impacts'
    bWarnAIWhenFired=true
    begin object name=ExploTemplate0 class=KFGameExplosion
        ExplosionEffects=KFImpactEffectInfo'WEP_SeekerSix_ARCH.FX_SeekerSix_Explosion'
        Damage=160
        DamageRadius=350
        DamageFalloffExponent=2
        MyDamageType=Class'KFDT_Explosive_Seeker6'
        KnockDownStrength=0
        ExplosionSound=AkEvent'WW_WEP_Seeker_6.Play_WEP_Seeker_6_Explosion'
        ExploLight=PointLightComponent'Default__KFProj_Rocket_Seeker6.ExplosionPointLight'
        ExploLightFadeOutTime=0.2
        CamShake=KFCameraShake'FX_CameraShake_Arch.Misc_Explosions.Light_Explosion_Rumble'
        CamShakeInnerRadius=0
        CamShakeOuterRadius=500
        CamShakeFalloff=3
    object end
    // Reference: KFGameExplosion'Default__KFProj_Rocket_Seeker6.ExploTemplate0'
    ExplosionTemplate=ExploTemplate0
    ProjDisintegrateTemplate=ParticleSystem'ZED_Siren_EMIT.FX_Siren_grenade_disable_01'
    AltExploEffects=KFImpactEffectInfo'WEP_SeekerSix_ARCH.FX_SeekerSix_Explosion_Concussive_force'
    ProjFlightTemplate=ParticleSystem'WEP_SeekerSix_EMIT.FX_SeekerSix_Projectile'
    ProjFlightTemplateZedTime=ParticleSystem'WEP_SeekerSix_EMIT.FX_SeekerSix_Projectile_ZED_TIME'
    AmbientSoundPlayEvent=AkEvent'WW_WEP_Seeker_6.Play_WEP_Seeker_6_Projectile'
    AmbientSoundStopEvent=AkEvent'WW_WEP_Seeker_6.Stop_WEP_Seeker_6_Projectile'
    AmbientComponent=AkComponent'Default__KFProj_Rocket_Seeker6.AmbientAkSoundComponent'
    Speed=5000
    MaxSpeed=5000
    MomentumTransfer=50000
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_Rocket_Seeker6.CollisionCylinder'
    CylinderComponent=CollisionCylinder
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_Rocket_Seeker6.CollisionCylinder'
    Components(0)=CollisionCylinder
    Components(1)=AkComponent'Default__KFProj_Rocket_Seeker6.AmbientAkSoundComponent'
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_Rocket_Seeker6.CollisionCylinder'
    CollisionComponent=CollisionCylinder
}