/*******************************************************************************
 * KFWeapAttach_MultiAmmo generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFWeapAttach_MultiAmmo extends KFWeaponAttachment
    hidecategories(Navigation,Object,Movement,Attachment,Collision,Physics,Advanced,Debug,Mobile);

const SecondaryReloadAnim = 'Reload_Secondary';
const CH_SecondaryReloadAnim = 'Reload_Secondary_CH';
const SecondaryReloadEliteAnim = 'Reload_Secondary_Elite';
const CH_SecondaryReloadEliteAnim = 'Reload_Secondary_Elite_CH';

simulated function CauseMuzzleFlash(byte FireModeNum)
{
    local bool AutoShellEject;

    if(FireModeNum != 0)
    {
        if((MuzzleFlash == none) && MuzzleFlashTemplate != none)
        {
            AttachMuzzleFlash();
        }
        AutoShellEject = MuzzleFlash.bAutoActivateShellEject;
        MuzzleFlash.bAutoActivateShellEject = false;
        super.CauseMuzzleFlash(FireModeNum);
        MuzzleFlash.bAutoActivateShellEject = AutoShellEject;        
    }
    else
    {
        super.CauseMuzzleFlash(FireModeNum);
    }
}

simulated function PlayReloadMagazineAnim(KFGame.KFWeaponAttachment.EWeaponState NewWeaponState, KFPawn P)
{
    local name AnimName;

    if((NewWeaponState == 9) || NewWeaponState == 10)
    {
        switch(NewWeaponState)
        {
            case 9:
                AnimName = ((!P.bIsCrouched) ? 'Reload_Secondary' : 'Reload_Secondary_CH');
                break;
            case 10:
                AnimName = ((!P.bIsCrouched) ? 'Reload_Secondary_Elite' : 'Reload_Secondary_Elite_CH');
                break;
            default:
                break;
        }
        PlayCharacterMeshAnim(P, AnimName, true);        
    }
    else
    {
        super.PlayReloadMagazineAnim(NewWeaponState, P);
    }
}

defaultproperties
{
    begin object name=SkeletalMeshComponent0 class=SkeletalMeshComponent
        Animations=AnimNodeSequence'Default__KFWeapAttach_MultiAmmo.SkeletalMeshComponent0.MeshSequenceA'
        ReplacementPrimitive=none
    object end
    // Reference: SkeletalMeshComponent'Default__KFWeapAttach_MultiAmmo.SkeletalMeshComponent0'
    WeapMesh=SkeletalMeshComponent0
}