/*******************************************************************************
 * KFProj_GrenadeShard generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFProj_GrenadeShard extends KFProj_RicochetBullet
    hidecategories(Navigation);

simulated event HitWall(Vector HitNormal, Actor Wall, PrimitiveComponent WallComp)
{
    SetRotation(rotator(Normal(Velocity)));
    SetPhysics(2);
    if(!Bounce(HitNormal, Wall))
    {
        if((WorldInfo.NetMode != NM_DedicatedServer) && ProjEffects != none)
        {
            ProjEffects.DeactivateSystem();
        }
        Explode(Location, HitNormal);
        ImpactedActor = none;
        bBounce = false;
    }
}

simulated function ProcessTouch(Actor Other, Vector HitLocation, Vector HitNormal)
{
    if(((Other != Instigator) && !Other.bWorldGeometry) && Other.bCanBeDamaged)
    {
        if(Pawn(Other) != none)
        {
            super(KFProj_Bullet).ProcessTouch(Other, HitLocation, HitNormal);            
        }
        else
        {
            ProcessDestructibleTouchOnBounce(Other, HitLocation, HitNormal);
        }        
    }
    else
    {
        super(KFProj_Bullet).ProcessTouch(Other, HitLocation, HitNormal);
    }
}

simulated function Tick(float DeltaTime)
{
    super(KFProj_Bullet).Tick(DeltaTime);
    if((WorldInfo.NetMode != NM_DedicatedServer) && Physics != 0)
    {
        SetRotation(rotator(Normal(Velocity)));
    }
}

defaultproperties
{
    RicochetEffects=KFImpactEffectInfo'WEP_MKII_ARCH.MKII_Shrapnel_Impacts'
    bSyncToThirdPersonMuzzleLocation=false
    bNoReplicationToInstigator=false
    bReplicateClientHitsAsFragments=true
    ProjFlightTemplate=ParticleSystem'WEP_3P_MKII_EMIT.FX_MKII_Shrapnel'
    ProjFlightTemplateZedTime=ParticleSystem'WEP_3P_MKII_EMIT.FX_MKII_Shrapnel_ZEDTime'
    AmbientComponent=AkComponent'Default__KFProj_GrenadeShard.AmbientAkSoundComponent'
    Speed=4000
    MaxSpeed=4000
    Damage=50
    MyDamageType=Class'KFDT_Piercing_NadeFragment'
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_GrenadeShard.CollisionCylinder'
    CylinderComponent=CollisionCylinder
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_GrenadeShard.CollisionCylinder'
    Components(0)=CollisionCylinder
    Components(1)=AkComponent'Default__KFProj_GrenadeShard.AmbientAkSoundComponent'
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_GrenadeShard.CollisionCylinder'
    CollisionComponent=CollisionCylinder
}