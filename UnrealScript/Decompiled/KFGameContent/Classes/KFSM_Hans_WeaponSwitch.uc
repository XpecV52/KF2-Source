/*******************************************************************************
 * KFSM_Hans_WeaponSwitch generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFSM_Hans_WeaponSwitch extends KFSM_PlaySingleAnim;

const EquipGunsAnim = 'Equip_Gun';
const PutAwayGunsAnim = 'PutAway_Gun';

var bool bIsEquipping;

function PlayAnimation()
{
    local KFPawn_ZedHans HansPawn;

    bIsEquipping = KFPOwner.SpecialMoveFlags > 0;
    AnimName = ((bIsEquipping) ? 'Equip_Gun' : 'PutAway_Gun');
    HansPawn = KFPawn_ZedHans(PawnOwner);
    if(HansPawn != none)
    {
        HansPawn.RightHolsterSkelCtrl.SetSkelControlActive(false);
        HansPawn.LeftHolsterSkelCtrl.SetSkelControlActive(false);
        if(bIsEquipping)
        {
            HansPawn.PlayDrawGunsDialog();
        }
    }
    super.PlayAnimation();
}

function SpecialMoveEnded(name PrevMove, name NextMove)
{
    local KFPawn_ZedHans HansPawn;

    HansPawn = KFPawn_ZedHans(PawnOwner);
    if(HansPawn != none)
    {
        HansPawn.SetWeaponStance(bIsEquipping);
        if(((!bIsEquipping && HansPawn != none) && HansPawn.bPendingSmokeGrenadeBarrage) && KFAIController_Hans(PawnOwner.Controller) != none)
        {
            KFAIController_Hans(PawnOwner.Controller).DoSmokeGrenadeThrow(true, true);
        }
    }
    super.SpecialMoveEnded(PrevMove, NextMove);
}

defaultproperties
{
    bDisablesWeaponFiring=true
    bDisableMovement=true
}