/*******************************************************************************
 * KFPawn_ZedBloatKingSubspawn generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFPawn_ZedBloatKingSubspawn extends KFPawn_Monster
    config(Game)
    hidecategories(Navigation);

var KFGameExplosion DeathExplosionTemplate;
var bool bPlayedExplosion;
var bool bDelayedExplosion;

simulated event bool CanDoSpecialMove(KFGame.KFPawn.ESpecialMove AMove, optional bool bForceCheck)
{
    if(AMove == 44)
    {
        return !IsDoingSpecialMove(44);
    }
    return super(KFPawn).CanDoSpecialMove(AMove, bForceCheck);
}

function bool Died(Controller Killer, class<DamageType> DamageType, Vector HitLocation)
{
    if(!bPlayedExplosion)
    {
        Explode();
    }
    return super.Died(Killer, DamageType, HitLocation);
}

simulated event Tick(float DeltaTime)
{
    super.Tick(DeltaTime);
    if(bDelayedExplosion && !bPlayedExplosion)
    {
        Explode();
    }
}

function DelayExplode()
{
    bDelayedExplosion = true;
}

simulated function PlayDying(class<DamageType> DamageType, Vector HitLoc)
{
    local KFExplosionActor ExploActor;

    super.PlayDying(DamageType, HitLoc);
    if(!bPlayedExplosion)
    {
        bPlayedExplosion = true;
        ExploActor = Spawn(Class'KFExplosion_BloatKingSubspawn', self,, Location, rotator(vect(0, 0, 1)));
        if(ExploActor != none)
        {
            ExploActor.InstigatorController = Controller;
            ExploActor.Instigator = self;
            ExploActor.Explode(DeathExplosionTemplate);
        }
        Mesh.SetHidden(true);
    }
}

simulated function Explode()
{
    if((Role == ROLE_Authority) && IsAliveAndWell())
    {
        KilledBy(self);
    }
}

function CauseHeadTrauma(optional float BleedOutTime)
{
    BleedOutTime = 5;
    if(IsAliveAndWell())
    {
        return;
    }
    super.CauseHeadTrauma(BleedOutTime);
}

simulated function PlayHeadAsplode()
{
    if(IsAliveAndWell())
    {
        return;
    }
    super.PlayHeadAsplode();
}

simulated function ApplyHeadChunkGore(class<KFDamageType> dmgType, Vector HitLocation, Vector HitDirection)
{
    if(IsAliveAndWell())
    {
        return;
    }
    super.ApplyHeadChunkGore(dmgType, HitLocation, HitDirection);
}

defaultproperties
{
    begin object name=ExploTemplate0 class=KFGameExplosion
        ExplosionEffects=KFImpactEffectInfo'CHR_Bile_ARCH.FX_Bile_Explosion_01'
        Damage=20
        DamageRadius=350
        DamageFalloffExponent=0
        MyDamageType=Class'KFDT_Toxic_BloatKingSubspawnExplosion'
        KnockDownStrength=0
        MomentumTransferScale=100
        ExplosionSound=AkEvent'WW_ZED_Abomination.Play_Bile_Explode'
        FractureMeshRadius=0
        FracturePartVel=0
        CamShake=KFCameraShake'FX_CameraShake_Arch.Grenades.Default_Grenade'
        CamShakeInnerRadius=250
        CamShakeOuterRadius=525
    object end
    // Reference: KFGameExplosion'Default__KFPawn_ZedBloatKingSubspawn.ExploTemplate0'
    DeathExplosionTemplate=ExploTemplate0
    MonsterArchPath="ZED_ARCH.ZED_KingBloatSubspawn_Archetype"
    MinSpawnSquadSizeType=ESquadType.EST_Crawler
    begin object name=MeleeHelper class=KFMeleeHelperAI
        BaseDamage=10
        MyDamageType=Class'KFDT_Slashing_ZedWeak'
        MomentumTransfer=25000
        MaxHitRange=190
    object end
    // Reference: KFMeleeHelperAI'Default__KFPawn_ZedBloatKingSubspawn.MeleeHelper'
    MeleeAttackHelper=MeleeHelper
    DoshValue=10
    XPValues[0]=8
    XPValues[1]=10
    XPValues[2]=10
    XPValues[3]=10
    DamageTypeModifiers=/* Array type was not detected. */
    DifficultySettings=Class'KFDifficulty_BloatKingSubspawn'
    SprintAkComponent=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.SprintAkComponent0'
    HeadShotAkComponent=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.HeadshotAkComponent0'
    PawnAnimInfo=KFPawnAnimInfo'ZED_Crawler_ANIM.Crawler_AnimGroup'
    LocalizationKey=KFPawn_ZedBloatKingSubspawn
    begin object name=ThirdPersonHead0 class=SkeletalMeshComponent
        ReplacementPrimitive=none
    object end
    // Reference: SkeletalMeshComponent'Default__KFPawn_ZedBloatKingSubspawn.ThirdPersonHead0'
    ThirdPersonHeadMeshComponent=ThirdPersonHead0
    bDisableTurnInPlace=true
    bUseQuadrupedFloorConform=true
    PenetrationResistance=0.1
    AfflictionHandler=KFAfflictionManager'Default__KFPawn_ZedBloatKingSubspawn.Afflictions'
    IncapSettings=/* Array type was not detected. */
    KnockdownImpulseScale=1
    SprintSpeed=550
    begin object name=FirstPersonArms class=KFSkeletalMeshComponent
        ReplacementPrimitive=none
    object end
    // Reference: KFSkeletalMeshComponent'Default__KFPawn_ZedBloatKingSubspawn.FirstPersonArms'
    ArmsMesh=FirstPersonArms
    begin object name=SpecialMoveHandler class=KFSpecialMoveHandler
        SpecialMoveClasses=/* Array type was not detected. */
    object end
    // Reference: KFSpecialMoveHandler'Default__KFPawn_ZedBloatKingSubspawn.SpecialMoveHandler'
    SpecialMoveHandler=SpecialMoveHandler
    AmbientAkComponent=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.AmbientAkSoundComponent_1'
    WeaponAkComponent=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.AmbientAkSoundComponent'
    WeaponAmbientEchoHandler=KFWeaponAmbientEchoHandler'Default__KFPawn_ZedBloatKingSubspawn.WeaponAmbientEchoHandler'
    FootstepAkComponent=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.FootstepAkSoundComponent'
    DialogAkComponent=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.DialogAkSoundComponent'
    DamageRecoveryTimeHeavy=0.75
    Mass=50
    GroundSpeed=450
    MaxFallSpeed=6000
    Health=250
    ControllerClass=Class'KFAIController_ZedBloatKingSubspawn'
    begin object name=KFPawnSkeletalMeshComponent class=KFSkeletalMeshComponent
        bPerBoneMotionBlur=false
        ReplacementPrimitive=none
        Translation=(X=0,Y=0,Z=-40)
    object end
    // Reference: KFSkeletalMeshComponent'Default__KFPawn_ZedBloatKingSubspawn.KFPawnSkeletalMeshComponent'
    Mesh=KFPawnSkeletalMeshComponent
    begin object name=CollisionCylinder class=CylinderComponent
        CollisionHeight=40
        CollisionRadius=47
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFPawn_ZedBloatKingSubspawn.CollisionCylinder'
    CylinderComponent=CollisionCylinder
    begin object name=Sprite class=SpriteComponent
        ReplacementPrimitive=none
    object end
    // Reference: SpriteComponent'Default__KFPawn_ZedBloatKingSubspawn.Sprite'
    Components(0)=Sprite
    begin object name=CollisionCylinder class=CylinderComponent
        CollisionHeight=40
        CollisionRadius=47
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFPawn_ZedBloatKingSubspawn.CollisionCylinder'
    Components(1)=CollisionCylinder
    begin object name=Arrow class=ArrowComponent
        ReplacementPrimitive=none
    object end
    // Reference: ArrowComponent'Default__KFPawn_ZedBloatKingSubspawn.Arrow'
    Components(2)=Arrow
    begin object name=KFPawnSkeletalMeshComponent class=KFSkeletalMeshComponent
        bPerBoneMotionBlur=false
        ReplacementPrimitive=none
        Translation=(X=0,Y=0,Z=-40)
    object end
    // Reference: KFSkeletalMeshComponent'Default__KFPawn_ZedBloatKingSubspawn.KFPawnSkeletalMeshComponent'
    Components(3)=KFPawnSkeletalMeshComponent
    Components(4)=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.AmbientAkSoundComponent'
    Components(5)=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.AmbientAkSoundComponent_1'
    Components(6)=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.FootstepAkSoundComponent'
    Components(7)=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.DialogAkSoundComponent'
    Components(8)=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.SprintAkComponent0'
    Components(9)=AkComponent'Default__KFPawn_ZedBloatKingSubspawn.HeadshotAkComponent0'
    bBlocksNavigation=true
    begin object name=CollisionCylinder class=CylinderComponent
        CollisionHeight=40
        CollisionRadius=47
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFPawn_ZedBloatKingSubspawn.CollisionCylinder'
    CollisionComponent=CollisionCylinder
    RotationRate=(Pitch=90000,Yaw=45000,Roll=90000)
}