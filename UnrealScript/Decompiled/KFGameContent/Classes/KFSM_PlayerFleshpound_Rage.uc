/*******************************************************************************
 * KFSM_PlayerFleshpound_Rage generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFSM_PlayerFleshpound_Rage extends KFSM_Zed_Taunt;

protected function bool InternalCanDoSpecialMove()
{
    local KFPawn_ZedFleshPound_Versus MyFPPawn;

    MyFPPawn = KFPawn_ZedFleshPound_Versus(KFPOwner);
    if(MyFPPawn != none)
    {
        return super(KFSpecialMove).InternalCanDoSpecialMove() && !MyFPPawn.bIsEnraged;
    }
    return super(KFSpecialMove).InternalCanDoSpecialMove();
}

static function byte PackFlagsBase(KFPawn P)
{
    local byte Variant;
    local KFPawnAnimInfo PAI;

    PAI = P.PawnAnimInfo;
    Variant = byte(Rand(PAI.TauntEnragedAnims.Length));
    if(Variant != 255)
    {
        return byte(2 + (Variant << 4));        
    }
    else
    {
        return 255;
    }
}

function SpecialMoveStarted(bool bForced, name PrevMove)
{
    local KFPawn_ZedFleshPound_Versus MyFPPawn;

    MyFPPawn = KFPawn_ZedFleshPound_Versus(KFPOwner);
    if(MyFPPawn != none)
    {
        MyFPPawn.SetEnraged(true);
    }
    super(KFSM_PlaySingleAnim).SpecialMoveStarted(bForced, PrevMove);
}
