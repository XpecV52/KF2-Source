/*******************************************************************************
 * KFSM_Matriarch_WarningSiren generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFSM_Matriarch_WarningSiren extends KFSM_ScreamBase;

var float MaxVictimDistance;
var name WindUpAnimName;

function SpecialMoveStarted(bool bForced, name PrevMove)
{
    super.SpecialMoveStarted(bForced, PrevMove);
    PlayWindUpAnimation();
    KFPawn_ZedMatriarch(KFPOwner).PlayWarningSirenDialog();
}

function AnimEndNotify(AnimNodeSequence SeqNode, float PlayedTime, float ExcessTime)
{
    switch(DeferredSeqName)
    {
        case WindUpAnimName:
            PlayFireAnim();
            break;
        case AnimName:
            KFPOwner.EndSpecialMove();
            break;
        default:
            break;
    }
}

function PlayAnimation();

function PlayWindUpAnimation()
{
    PlaySpecialMoveAnim(WindUpAnimName, 0, BlendInTime, BlendOutTime, 1);
    KFPOwner.ZeroMovementVariables();
}

function PlayFireAnim()
{
    PlaySpecialMoveAnim(AnimName, 0, 0.1, 0.2);
    KFPOwner.ZeroMovementVariables();
    ScreamBegan();
}

function SpecialMoveEnded(name PrevMove, name NextMove)
{
    super.SpecialMoveEnded(PrevMove, NextMove);
}

defaultproperties
{
    MaxVictimDistance=300
    WindUpAnimName=Warning_Siren_In
    ScreamDamage=35
    begin object name=ExploTemplate0 class=KFGameExplosion
        DamageRadius=1000
        DamageFalloffExponent=0.5
        MyDamageType=Class'KFDT_Sonic_MatriarchWarningSiren'
    object end
    // Reference: KFGameExplosion'Default__KFSM_Matriarch_WarningSiren.ExploTemplate0'
    ExplosionTemplate=ExploTemplate0
    AnimName=Warning_Siren
    bCanBeInterrupted=false
    bDisableMovement=true
    bDisableSteering=true
    bShouldDeferToPostTick=true
    Handle=KFSM_Matriarch_WarningSiren
}