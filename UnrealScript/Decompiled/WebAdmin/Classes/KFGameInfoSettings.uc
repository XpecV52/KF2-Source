/*******************************************************************************
 * KFGameInfoSettings generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFGameInfoSettings extends WebAdminSettings;

var class<KFGameInfo> KFGameInfoClass;
var GameInfo GameInfo;

function setCurrentGameInfo(GameInfo Instance)
{
    if(Instance != none)
    {
        if(!ClassIsChildOf(Instance.Class, KFGameInfoClass))
        {
            return;
        }
    }
    super.setCurrentGameInfo(Instance);
    GameInfo = Instance;
    if(GameInfo != none)
    {
        initSettings();
    }
}

function cleanupSettings()
{
    GameInfo = none;
    super.cleanupSettings();
}

function initSettings()
{
    if(KFGameInfoClass == none)
    {
        return;
    }
    if(KFGameInfo(GameInfo) != none)
    {
        SetIntPropertyByName('GameStartDelay', KFGameInfo(GameInfo).GameStartDelay);        
    }
    else
    {
        SetIntPropertyByName('GameStartDelay', KFGameInfoClass.default.GameStartDelay);
    }
    if(KFGameInfo(GameInfo) != none)
    {
        SetIntPropertyByName('ReadyUpDelay', KFGameInfo(GameInfo).ReadyUpDelay);        
    }
    else
    {
        SetIntPropertyByName('ReadyUpDelay', KFGameInfoClass.default.ReadyUpDelay);
    }
    if(KFGameInfo(GameInfo) != none)
    {
        SetIntPropertyByName('EndOfGameDelay', KFGameInfo(GameInfo).EndOfGameDelay);        
    }
    else
    {
        SetIntPropertyByName('EndOfGameDelay', KFGameInfoClass.default.EndOfGameDelay);
    }
    if(KFGameInfo(GameInfo) != none)
    {
        SetIntPropertyByName('bDisablePickups', int(KFGameInfo(GameInfo).bDisablePickups));        
    }
    else
    {
        SetIntPropertyByName('bDisablePickups', int(KFGameInfoClass.default.bDisablePickups));
    }
}

function saveSettings()
{
    saveInternal();
    if(GameInfo != none)
    {
        GameInfo.SaveConfig();
    }
    KFGameInfoClass.static.StaticSaveConfig();
}

protected function saveInternal()
{
    local int Val;

    if(KFGameInfoClass == none)
    {
        return;
    }
    GetIntPropertyByName('GameStartDelay', KFGameInfoClass.default.GameStartDelay);
    if(KFGameInfo(GameInfo) != none)
    {
        GetIntPropertyByName('GameStartDelay', KFGameInfo(GameInfo).GameStartDelay);
    }
    GetIntPropertyByName('ReadyUpDelay', KFGameInfoClass.default.ReadyUpDelay);
    if(KFGameInfo(GameInfo) != none)
    {
        GetIntPropertyByName('ReadyUpDelay', KFGameInfo(GameInfo).ReadyUpDelay);
    }
    GetIntPropertyByName('EndOfGameDelay', KFGameInfoClass.default.EndOfGameDelay);
    if(KFGameInfo(GameInfo) != none)
    {
        GetIntPropertyByName('EndOfGameDelay', KFGameInfo(GameInfo).EndOfGameDelay);
    }
    if(GetIntPropertyByName('bDisablePickups', Val))
    {
        KFGameInfoClass.default.bDisablePickups = Val != 0;
        if(KFGameInfo(GameInfo) != none)
        {
            KFGameInfo(GameInfo).bDisablePickups = Val != 0;
        }
    }
}

defaultproperties
{
    KFGameInfoClass=Class'KFGame.KFGameInfo'
    SettingsGroups(0)=(GroupID="Rules",DisplayName="Rules",pMin=0,pMax=100,lMin=0,lMax=0)
    SettingsGroups(1)=(GroupID="Game",DisplayName="Game",pMin=100,pMax=200,lMin=0,lMax=0)
    SettingsGroups(2)=(GroupID="Advanced",DisplayName="Advanced",pMin=1000,pMax=1100,lMin=0,lMax=0)
    Properties=/* Array type was not detected. */
    PropertyMappings=/* Array type was not detected. */
}