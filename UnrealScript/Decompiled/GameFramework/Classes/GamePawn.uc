/*******************************************************************************
 * GamePawn generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class GamePawn extends Pawn
    abstract
    native
    nativereplication
    config(Game)
    hidecategories(Navigation);

var transient bool bLastHitWasHeadShot;
var bool bRespondToExplosions;

replication
{
     if(Role == ROLE_Authority)
        bLastHitWasHeadShot;
}

simulated event UpdateShadowSettings(bool bInWantShadow)
{
    local bool bNewCastShadow, bNewCastDynamicShadow;

    if(Mesh != none)
    {
        bNewCastShadow = default.Mesh.CastShadow && bInWantShadow;
        bNewCastDynamicShadow = default.Mesh.bCastDynamicShadow && bInWantShadow;
        if((bNewCastShadow != Mesh.CastShadow) || bNewCastDynamicShadow != Mesh.bCastDynamicShadow)
        {
            Mesh.CastShadow = bNewCastShadow;
            Mesh.bCastDynamicShadow = bNewCastDynamicShadow;
            if(WorldInfo.bAggressiveLOD == true)
            {
                ReattachMesh();                
            }
            else
            {
                ReattachMeshWithoutBeingSeen();
            }
        }
    }
}

simulated function ReattachMesh()
{
    ClearTimer('ReattachMeshWithoutBeingSeen');
    ReattachComponent(Mesh);
}

simulated function ReattachMeshWithoutBeingSeen()
{
    if(LastRenderTime > (WorldInfo.TimeSeconds - 1))
    {
        SetTimer(0.5 + (FRand() * 0.5), false, 'ReattachMeshWithoutBeingSeen');        
    }
    else
    {
        ReattachMesh();
    }
}

defaultproperties
{
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__GamePawn.CollisionCylinder'
    CylinderComponent=CollisionCylinder
    begin object name=Sprite class=SpriteComponent
        ReplacementPrimitive=none
    object end
    // Reference: SpriteComponent'Default__GamePawn.Sprite'
    Components(0)=Sprite
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__GamePawn.CollisionCylinder'
    Components(1)=CollisionCylinder
    begin object name=Arrow class=ArrowComponent
        ReplacementPrimitive=none
    object end
    // Reference: ArrowComponent'Default__GamePawn.Arrow'
    Components(2)=Arrow
    bCanBeAdheredTo=true
    bCanBeFrictionedTo=true
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__GamePawn.CollisionCylinder'
    CollisionComponent=CollisionCylinder
}