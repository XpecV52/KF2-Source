/*******************************************************************************
 * UIDataProvider_OnlineProfileSettings generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class UIDataProvider_OnlineProfileSettings extends UIDataProvider_OnlinePlayerStorage
    transient
    native(UIPrivate)
    config(Game)
    hidecategories(Object,UIRoot);

function bool ReadData(OnlinePlayerInterface PlayerInterface, byte LocalUserNum, int DeviceID, OnlinePlayerStorage PlayerStorage)
{
    return PlayerInterface.ReadProfileSettings(LocalUserNum, OnlineProfileSettings(PlayerStorage));
}

function bool WriteData(OnlinePlayerInterface PlayerInterface, byte LocalUserNum, int DeviceID, OnlinePlayerStorage PlayerStorage)
{
    return PlayerInterface.WriteProfileSettings(LocalUserNum, OnlineProfileSettings(PlayerStorage));
}

function bool GetData(OnlinePlayerInterface PlayerInterface, byte LocalUserNum)
{
    local OnlineProfileSettings CachedProfile;

    CachedProfile = PlayerInterface.GetProfileSettings(LocalUserNum);
    if(CachedProfile != none)
    {
        Profile = CachedProfile;
        return PlayerInterface.ReadProfileSettings(LocalUserNum, OnlineProfileSettings(Profile));
    }
    return false;
}

function AddReadCompleteDelegate(OnlinePlayerInterface PlayerInterface, byte LocalUserNum)
{
    PlayerInterface.AddReadProfileSettingsCompleteDelegate(LocalUserNum, OnReadStorageComplete);
}

function ClearReadCompleteDelegate(OnlinePlayerInterface PlayerInterface, byte LocalUserNum)
{
    PlayerInterface.ClearReadProfileSettingsCompleteDelegate(LocalUserNum, OnReadStorageComplete);
}

function RefreshStorageData()
{
    local OnlineSubsystem OnlineSub;
    local OnlinePlayerInterface PlayerInterface;

    OnlineSub = Class'GameEngine'.static.GetOnlineSubsystem();
    if(OnlineSub != none)
    {
        PlayerInterface = OnlineSub.PlayerInterface;
        if(NotEqual_InterfaceInterface(PlayerInterface, (none)))
        {
            if(!ReadData(PlayerInterface, byte(PlayerControllerId), Profile.DeviceID, Profile))
            {
            }
        }
    }
}

function OnStorageDeviceChange();

defaultproperties
{
    ProviderName=ProfileData
}