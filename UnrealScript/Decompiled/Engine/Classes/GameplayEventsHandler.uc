/*******************************************************************************
 * GameplayEventsHandler generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class GameplayEventsHandler extends Object
    abstract
    native
    config(GameStats);

var config array<config int> EventIDFilter;
var config array<config GameStatGroup> GroupFilter;
var private transient GameplayEventsReader Reader;

function SetReader(GameplayEventsReader NewReader)
{
    Reader = NewReader;
}

// Export UGameplayEventsHandler::execPreProcessStream(FFrame&, void* const)
native event PreProcessStream();

event PostProcessStream();

event ResolveGroupFilters()
{
    local int EventIdx, FilterIdx;

    EventIdx = 0;
    J0x0B:

    if(EventIdx < Reader.SupportedEvents.Length)
    {
        FilterIdx = GroupFilter.Find('Group', Reader.SupportedEvents[EventIdx].StatGroup.Group;
        if(FilterIdx != -1)
        {
            if(Reader.SupportedEvents[EventIdx].StatGroup.Level > GroupFilter[FilterIdx].Level)
            {
                AddFilter(Reader.SupportedEvents[EventIdx].EventID);
            }
        }
        ++ EventIdx;
        goto J0x0B;
    }
}

function AddFilter(int EventID)
{
    if(EventIDFilter.Find(EventID == -1)
    {
        EventIDFilter.AddItem(EventID;
    }
}

function RemoveFilter(int EventID)
{
    EventIDFilter.RemoveItem(EventID;
}
