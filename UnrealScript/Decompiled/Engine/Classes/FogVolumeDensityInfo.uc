/*******************************************************************************
 * FogVolumeDensityInfo generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class FogVolumeDensityInfo extends Info
    abstract
    native(FogVolume)
    notplaceable
    hidecategories(Navigation,Collision)
    classgroup(Fog)
    autoexpandcategories(FogVolumeDensityInfo);

struct CheckpointRecord
{
    var bool bEnabled;

    structdefaultproperties
    {
        bEnabled=false
    }
};

/** The fog component which stores data specific to each density function. */
var() export editinline FogVolumeDensityComponent DensityComponent;
/**  
 *The automatic mesh component, which sizes with this fog volume actor.  This mesh component gets rendered with FogMaterial.
 * It is optional, and individual actors can be specified using the FogVolumeActors array instead.
 */
var() export editinline StaticMeshComponent AutomaticMeshComponent;
var repnotify bool bEnabled;

replication
{
     if(Role == ROLE_Authority)
        bEnabled;
}

event PostBeginPlay()
{
    super(Actor).PostBeginPlay();
    if(DensityComponent != none)
    {
        bEnabled = DensityComponent.bEnabled;
    }
}

simulated event ReplicatedEvent(name VarName)
{
    if(VarName == 'bEnabled')
    {
        DensityComponent.SetEnabled(bEnabled);        
    }
    else
    {
        super(Actor).ReplicatedEvent(VarName);
    }
}

simulated function OnToggle(SeqAct_Toggle Action)
{
    if(Action.InputLinks[0].bHasImpulse)
    {
        DensityComponent.SetEnabled(true);        
    }
    else
    {
        if(Action.InputLinks[1].bHasImpulse)
        {
            DensityComponent.SetEnabled(false);            
        }
        else
        {
            if(Action.InputLinks[2].bHasImpulse)
            {
                DensityComponent.SetEnabled(!DensityComponent.bEnabled);
            }
        }
    }
    bEnabled = DensityComponent.bEnabled;
    ForceNetRelevant();
    SetForcedInitialReplicatedProperty(BoolProperty'bEnabled', bEnabled == default.bEnabled);
}

function bool ShouldSaveForCheckpoint()
{
    return RemoteRole != ROLE_None;
}

function CreateCheckpointRecord(out CheckpointRecord Record)
{
    Record.bEnabled = bEnabled;
}

function ApplyCheckpointRecord(const out CheckpointRecord Record)
{
    bEnabled = Record.bEnabled;
    DensityComponent.SetEnabled(bEnabled);
    ForceNetRelevant();
    SetForcedInitialReplicatedProperty(BoolProperty'bEnabled', bEnabled == default.bEnabled);
}

defaultproperties
{
    begin object name=AutomaticMeshComponent0 class=StaticMeshComponent
        StaticMesh=StaticMesh'EngineMeshes.Cube'
        WireframeColor=(B=200,G=100,R=100,A=255)
        ReplacementPrimitive=none
        bIgnoreOwnerHidden=true
        bUseAsOccluder=false
        bSelectable=false
        bAcceptsStaticDecals=false
        bAcceptsDynamicDecals=false
        CastShadow=false
        bCastDynamicShadow=false
        bAcceptsLights=false
        bAcceptsDynamicLights=false
        BlockRigidBody=false
    object end
    // Reference: StaticMeshComponent'Default__FogVolumeDensityInfo.AutomaticMeshComponent0'
    AutomaticMeshComponent=AutomaticMeshComponent0
    begin object name=Sprite class=SpriteComponent
        SpriteCategoryName=Fog
        ReplacementPrimitive=none
    object end
    // Reference: SpriteComponent'Default__FogVolumeDensityInfo.Sprite'
    Components(0)=Sprite
    begin object name=AutomaticMeshComponent0 class=StaticMeshComponent
        StaticMesh=StaticMesh'EngineMeshes.Cube'
        WireframeColor=(B=200,G=100,R=100,A=255)
        ReplacementPrimitive=none
        bIgnoreOwnerHidden=true
        bUseAsOccluder=false
        bSelectable=false
        bAcceptsStaticDecals=false
        bAcceptsDynamicDecals=false
        CastShadow=false
        bCastDynamicShadow=false
        bAcceptsLights=false
        bAcceptsDynamicLights=false
        BlockRigidBody=false
    object end
    // Reference: StaticMeshComponent'Default__FogVolumeDensityInfo.AutomaticMeshComponent0'
    Components(1)=AutomaticMeshComponent0
    CollisionType=ECollisionType.COLLIDE_CustomDefault
    bNoDelete=true
}