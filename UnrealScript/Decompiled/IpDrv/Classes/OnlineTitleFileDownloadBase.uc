/*******************************************************************************
 * OnlineTitleFileDownloadBase generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class OnlineTitleFileDownloadBase extends MCPBase
    native
    config(Engine)
    implements(OnlineTitleFileInterface);

enum EMcpFileCompressionType
{
    MFCT_NONE,
    MFCT_ZLIB,
    MFCT_MAX
};

struct native TitleFileWeb extends TitleFile
{
    var string StringData;
    var HttpRequestInterface HTTPRequest;
    var OnlineTitleFileDownloadBase.EMcpFileCompressionType FileCompressionType;
};

struct native FileNameToURLMapping
{
    var name Filename;
    var name UrlMapping;

    structdefaultproperties
    {
        Filename=None
        UrlMapping=None
    }
};

var private array< delegate<OnReadTitleFileComplete> > ReadTitleFileCompleteDelegates;
var array< delegate<OnRequestTitleFileListComplete> > RequestTitleFileListCompleteDelegates;
var config string BaseUrl;
var config string RequestFileListURL;
var config string RequestFileURL;
var config float TimeOut;
var config array<config FileNameToURLMapping> FilesToUrls;
var delegate<OnReadTitleFileComplete> __OnReadTitleFileComplete__Delegate;
var delegate<OnRequestTitleFileListComplete> __OnRequestTitleFileListComplete__Delegate;

delegate OnReadTitleFileComplete(bool bWasSuccessful, string Filename);

function bool ReadTitleFile(string FileToRead, optional Engine.OnlineSubsystem.EOnlineFileType FileType)
{
    FileType = 1;
}

function AddReadTitleFileCompleteDelegate(delegate<OnReadTitleFileComplete> ReadTitleFileCompleteDelegate)
{
    if(ReadTitleFileCompleteDelegates.Find(ReadTitleFileCompleteDelegate == -1)
    {
        ReadTitleFileCompleteDelegates[ReadTitleFileCompleteDelegates.Length] = ReadTitleFileCompleteDelegate;
    }
}

function ClearReadTitleFileCompleteDelegate(delegate<OnReadTitleFileComplete> ReadTitleFileCompleteDelegate)
{
    local int RemoveIndex;

    RemoveIndex = ReadTitleFileCompleteDelegates.Find(ReadTitleFileCompleteDelegate;
    if(RemoveIndex != -1)
    {
        ReadTitleFileCompleteDelegates.Remove(RemoveIndex, 1;
    }
}

function bool GetTitleFileContents(string Filename, out array<byte> FileContents);

function Engine.OnlineSubsystem.EOnlineEnumerationReadState GetTitleFileState(string Filename);

function bool ClearDownloadedFiles();

function bool ClearDownloadedFile(string Filename);

function bool RequestTitleFileList();

delegate OnRequestTitleFileListComplete(bool bWasSuccessful, array<string> FilePaths);

function AddRequestTitleFileListCompleteDelegate(delegate<OnRequestTitleFileListComplete> RequestTitleFileListDelegate)
{
    if(RequestTitleFileListCompleteDelegates.Find(RequestTitleFileListDelegate == -1)
    {
        RequestTitleFileListCompleteDelegates.AddItem(RequestTitleFileListDelegate;
    }
}

function ClearRequestTitleFileListCompleteDelegate(delegate<OnRequestTitleFileListComplete> RequestTitleFileListDelegate)
{
    local int RemoveIndex;

    RemoveIndex = RequestTitleFileListCompleteDelegates.Find(RequestTitleFileListDelegate;
    if(RemoveIndex != -1)
    {
        RequestTitleFileListCompleteDelegates.Remove(RemoveIndex, 1;
    }
}

// Export UOnlineTitleFileDownloadBase::execGetUrlForFile(FFrame&, void* const)
native function string GetUrlForFile(string Filename);
