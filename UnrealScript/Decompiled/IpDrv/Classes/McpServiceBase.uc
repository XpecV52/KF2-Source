/*******************************************************************************
 * McpServiceBase generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class McpServiceBase extends Object
    native
    config(Engine);

var config string McpConfigClassName;
var McpServiceConfig McpConfig;

event Init()
{
    local class<McpServiceConfig> McpConfigClass;

    LogInternal("Loading McpServerBase McpConfigClass:" $ default.McpConfigClassName);
    McpConfigClass = class<McpServiceConfig>(DynamicLoadObject(default.McpConfigClassName, Class'Class'));
    if(McpConfigClass != none)
    {
        McpConfig = new McpConfigClass;
    }
}

function string GetBaseURL()
{
    return (McpConfig.Protocol $ "://") $ McpConfig.Domain;
}

function string GetAppAccessURL()
{
    return (("?appKey=" $ McpConfig.AppKey) $ "&appSecret=") $ McpConfig.AppSecret;
}

function string GetUserAuthURL(string McpId)
{
    local string AuthTicket;

    AuthTicket = McpConfig.GetUserAuthTicket(McpId);
    if(Len(AuthTicket) > 0)
    {
        return "&authTicket=" $ AuthTicket;
    }
    return "";
}

defaultproperties
{
    McpConfigClassName="IpDrv.McpServiceConfig"
}