/*******************************************************************************
 * AICommand_SummonZeds generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class AICommand_SummonZeds extends AICommand_SpecialMove within KFAIController;

var KFAIWaveInfo SummonWave;
var int MaxBossMinions;

static function bool Summon(KFAIController AI, KFAIWaveInfo NewSummonWave, int NewMaxBossMinions)
{
    local AICommand_SummonZeds Cmd;

    if(AI != none)
    {
        Cmd = new (AI) default.Class;
        Cmd.SummonWave = NewSummonWave;
        Cmd.MaxBossMinions = NewMaxBossMinions;
        if(Cmd != none)
        {
            AI.PushCommand(Cmd);
            return true;
        }
    }
    return false;
}

function Pushed()
{
    super.Pushed();
    Outer.StopAllLatentMovement();
    Outer.Pawn.ZeroMovementVariables();
    Outer.DisableMeleeRangeEventProbing();
}

function Popped()
{
    Outer.EnableMeleeRangeEventProbing();
    super.Popped();
}

state Command_SpecialMove
{
    function bool ExecuteSpecialMove()
    {
        local KFAISpawnManager SpawnManager;

        SpawnManager = KFGameInfo(Outer.WorldInfo.Game).SpawnManager;
        if(SpawnManager != none)
        {
            Class'AICommand_TauntEnemy'.static.Taunt(Outer);
            SpawnManager.SummonBossMinions(SummonWave.Squads, MaxBossMinions);
            return true;
        }
        return false;
    }
    stop;    
}
