/*******************************************************************************
 * KFPowerUp_HellishRage generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFPowerUp_HellishRage extends KFPowerUp
    hidecategories(Navigation,Movement,Collision);

var int HealthCost;
var class<KFDamageType> PowerUpCostDamageType;
var float DamageModifier;
var float SpeedModifier;
var float SprintSpeedModifier;

function ActivatePowerUp()
{
    super.ActivatePowerUp();
    if((Role == ROLE_Authority) && bPowerUpActive)
    {
        ApplyPowerUpCost();
    }
}

function ReactivatePowerUp()
{
    super.ReactivatePowerUp();
    if((Role == ROLE_Authority) && bPowerUpActive)
    {
        ApplyPowerUpCost();
    }
}

function ApplyPowerUpCost()
{
    OwnerPawn.TakeDamage(HealthCost, OwnerPC, vect(0, 0, 0), vect(0, 0, 0), PowerUpCostDamageType);
}

function ModifyDamageGiven(out int InDamage, optional Actor DamageCauser, optional KFPawn_Monster MyKFPM, optional KFPlayerController DamageInstigator, optional class<KFDamageType> DamageType, optional int HitZoneIdx)
{
    local float TempDamage;

    TempDamage = float(InDamage);
    if(DamageCauser != none)
    {
        TempDamage += (float(InDamage) * DamageModifier);
    }
    InDamage = Round(TempDamage);
}

simulated function ModifySpeed(out float Speed)
{
    Speed += (Speed * SpeedModifier);
}

simulated function ModifySprintSpeed(out float Speed)
{
    Speed += (Speed * SprintSpeedModifier);
}

function ApplySecondaryDamage(KFPawn Victim, int DamageTaken, optional Controller InstigatedBy)
{
    if((Victim != none) && Victim != OwnerPawn)
    {
        Victim.ApplyDamageOverTime(SecondaryDamage, InstigatedBy, default.SecondaryDamageType);
    }
}

defaultproperties
{
    HealthCost=20
    PowerUpCostDamageType=Class'KFDT_HellishRageCost'
    DamageModifier=0.5
    SpeedModifier=0.25
    SprintSpeedModifier=0.25
    PowerUpName="Hellish Rage"
    PowerUpDuration=20
    CanBeHealedWhilePowerUpIsActive=false
    SecondaryDamageType=Class'KFDT_Fire_HellishRage'
    SecondaryDamage=50
    ScreenMaterialName=Effect_PowerUp_HellishRage
    CameraLensEffectTemplate=Class'KFCameraLensEmit_PowerUp_HellishRage'
    PowerUpEffect=ParticleSystem'FX_Gameplay_EMIT.FX_Char_PowerUp_HellishRage'
    AudioLoopFirstPerson=AkEvent'WW_ENV_HellmarkStation.Play_HellishRage_1P'
    AudioLoopThirdPerson=AkEvent'WW_ENV_HellmarkStation.Play_HellishRage_3P'
    AudioLoopThirdPersonStop=AkEvent'WW_ENV_HellmarkStation.Stop_HellishRage_3P'
    AudioLoopFirstPersonStop=AkEvent'WW_ENV_HellmarkStation.Stop_HellishRage_1P'
}