/*******************************************************************************
 * KFAIController_ZedCrawler generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFAIController_ZedCrawler extends KFAIController_Monster
    native(AI)
    config(AI)
    hidecategories(Navigation);

var Actor LastAmbushNode;
var Vector LastRMVelocity;
var int MinExtraCostForFloorNodes;
var int MaxExtraCostForFloorNodes;
var Vector OriginalMeshTranslation;
var int FailedToFindAnchorCount;
var int MaxFailedToFindAnchorCount;
var Vector LastCrawlerX;
var Vector OldFloor;

event FailedToFindAnchor()
{
    AILog_Internal("Failed to Find Anchor! Phys: " $ MyKFPawn.GetPhysicsName(), 'PathWarning');
    ++ FailedToFindAnchorCount;
    if(!IsTimerActive('Timer_ResetFailedToFindAnchorCount'))
    {
        SetTimer(1.5, false, 'Timer_ResetFailedToFindAnchorCount');
    }
    if(FailedToFindAnchorCount > MaxFailedToFindAnchorCount)
    {
        AttemptToTeleport();
    }
}

function Timer_ResetFailedToFindAnchorCount()
{
    FailedToFindAnchorCount = 0;
}

function bool AmIAllowedToStillUsePathNodes()
{
    return true;
}

function bool ShouldSprint()
{
    if(MyKFPawn.bCanSprint || MyKFPawn.bCanSprintWhenDamaged && MyKFPawn.Health < MyKFPawn.HealthMax)
    {
        return true;
    }
    return false;
}

defaultproperties
{
    MinExtraCostForFloorNodes=14000
    MaxExtraCostForFloorNodes=25000
    MaxFailedToFindAnchorCount=3
    bIsProbingMeleeRangeEvents=true
    DefaultCommandClass=Class'AICommand_Base_Crawler'
    MeleeCommandClass=Class'AICommand_Base_Crawler'
    EvadeGrenadeChance=0.5
    RotationRate=(Pitch=70000,Yaw=70000,Roll=40000)
}