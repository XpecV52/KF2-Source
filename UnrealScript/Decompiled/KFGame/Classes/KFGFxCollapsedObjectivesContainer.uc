/*******************************************************************************
 * KFGFxCollapsedObjectivesContainer generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFGFxCollapsedObjectivesContainer extends KFGFxObject_Container within GFxMoviePlayer;

function Initialize(KFGFxObject_Menu NewParentMenu)
{
    super.Initialize(NewParentMenu);
    PopulateData();
}

function PopulateData()
{
    local int ItemIndex, I;
    local GFxObject DataObject, DataProvider;
    local class<KFGFxSpecialEventObjectivesContainer> SpecialEventClass;
    local KFPlayerController KFPC;

    KFPC = KFPlayerController(Outer.GetPC());
    DataProvider = Outer.CreateArray();
    ItemIndex = 0;
    if(KFPC.IsA('KFPlayerController_WeeklySurvival') || Class'WorldInfo'.static.IsMenuLevel())
    {
        DataProvider.SetElementObject(ItemIndex, GetWeeklyDataObject());
        ++ ItemIndex;
    }
    SpecialEventClass = Class'KFGFxMenu_StartGame'.static.GetSpecialEventClass(Class'KFGameEngine'.static.GetSeasonalEventID());
    if((SpecialEventClass != none) && SpecialEventClass != Class'KFGFxSpecialEventObjectivesContainer')
    {
        I = 0;
        J0x166:

        if(I < SpecialEventClass.default.SpecialEventObjectiveInfoList.Length)
        {
            DataObject = Outer.CreateObject("Object");
            DataObject.SetString("label", SpecialEventClass.default.SpecialEventObjectiveInfoList[I].TitleString);
            DataObject.SetString("description", SpecialEventClass.default.SpecialEventObjectiveInfoList[I].DescriptionString);
            DataObject.SetString("iconPath", "img://" $ SpecialEventClass.default.ObjectiveIconURLs[I]);
            DataObject.SetBool("complete", KFPC.IsEventObjectiveComplete(I));
            DataObject.SetBool("showProgres", false);
            DataObject.SetFloat("progress", 0);
            DataObject.SetString("textValue", "");
            DataProvider.SetElementObject(ItemIndex, DataObject);
            ++ ItemIndex;
            ++ I;
            goto J0x166;
        }
    }
    SetObject("objectives", DataProvider);
}

function GFxObject GetWeeklyDataObject()
{
    local GFxObject DataObject;
    local KFWeeklyOutbreakInformation WeeklyInfo;
    local KFPlayerController KFPC;

    KFPC = KFPlayerController(Outer.GetPC());
    WeeklyInfo = Class'KFMission_LocalizedStrings'.static.GetCurrentWeeklyOutbreakInfo();
    DataObject = Outer.CreateObject("Object");
    DataObject.SetString("label", WeeklyInfo.FriendlyName);
    DataObject.SetString("description", (WeeklyInfo.DescriptionStrings[0] @ "
") @ WeeklyInfo.DescriptionStrings[1]);
    DataObject.SetString("iconPath", "img://" $ WeeklyInfo.IconPath);
    DataObject.SetBool("complete", KFPC.IsWeeklyEventComplete());
    DataObject.SetBool("showProgres", false);
    DataObject.SetFloat("progress", 0);
    DataObject.SetString("textValue", "");
    return DataObject;
}
