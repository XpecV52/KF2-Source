/*******************************************************************************
 * KFWeapAttach_Minigun generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFWeapAttach_Minigun extends KFWeaponAttachment
    native
    notplaceable
    hidecategories(Navigation,Object,Movement,Attachment,Collision,Physics,Advanced,Debug,Mobile);

var AnimTree CustomAnimTree;
var bool bWindUpModeActive;
var bool bWindUpReady;
var float WindUpActivationTime;
var transient float WindUpControlTime;
var float WindUpRotationSpeed;
var CylinderRotationInfo CylinderRotInfo;

// Export UKFWeapAttach_Minigun::execUpdateCylinderRotation(FFrame&, void* const)
native simulated function UpdateCylinderRotation(out CylinderRotationInfo RotInfo, float Degrees);

event PreBeginPlay()
{
    super.PreBeginPlay();
    if(CustomAnimTree != none)
    {
        WeapMesh.SetAnimTreeTemplate(CustomAnimTree);
        WeapAnimNode = AnimNodeSequence(AnimTree(WeapMesh.Animations).Children[0].Anim);
        CylinderRotInfo.Control = SkelControlSingleBone(WeapMesh.FindSkelControl('CylinderControl'));
        if(CylinderRotInfo.Control != none)
        {
            CylinderRotInfo.Control.SetSkelControlActive(true);
        }
    }
}

simulated function UpdateWindUp(bool bActive)
{
    bWindUpModeActive = bActive;
}

defaultproperties
{
    CustomAnimTree=AnimTree'WEP_Minigun_ARCH.WEP_Animtree_Minigun_3p'
    WindUpActivationTime=0.7
    WindUpRotationSpeed=200
    begin object name=SkeletalMeshComponent0 class=SkeletalMeshComponent
        Animations=AnimNodeSequence'Default__KFWeapAttach_Minigun.SkeletalMeshComponent0.MeshSequenceA'
        bForceRefpose=0
        ReplacementPrimitive=none
    object end
    // Reference: SkeletalMeshComponent'Default__KFWeapAttach_Minigun.SkeletalMeshComponent0'
    WeapMesh=SkeletalMeshComponent0
    CollisionType=ECollisionType.COLLIDE_CustomDefault
}