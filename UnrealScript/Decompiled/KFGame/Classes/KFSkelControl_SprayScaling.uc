/*******************************************************************************
 * KFSkelControl_SprayScaling generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFSkelControl_SprayScaling extends SkelControlBase
    native(Anim)
    hidecategories(Object,Object);

struct native SprayScaleInParams
{
    /** Will scale from ScaleRange.X to ScaleRange.Y over this time range. */
    var() Vector2D ScaleInTimeRange;
    var() Vector2D ScaleRange;
    /** Exponent used to control the mapping curve. */
    var() float Pow;

    structdefaultproperties
    {
        ScaleInTimeRange=(X=0,Y=0)
        ScaleRange=(X=0,Y=0)
        Pow=1
    }
};

struct native SprayVelocityScaleParams
{
    /** Range of velocities that is mapped to ScaleRange */
    var() Vector2D VelocityRange;
    /** Range of scales that is mapped to VelocityRange. */
    var() Vector2D ScaleRange;
    /** Exponent used to control the mapping curve. */
    var() float Pow;

    structdefaultproperties
    {
        VelocityRange=(X=0,Y=0)
        ScaleRange=(X=0,Y=0)
        Pow=1
    }
};

struct native SprayBoneScaleParams
{
    /** which bone we're setting params for. */
    var() name BoneName;
    var float CachedBoneIndex;
    /** which bone we're setting params for. */
    var() bool bScaleIn;
    /** which bone we're setting params for. */
    var() SprayScaleInParams ScaleInParams;
    /** which bone we're setting params for. */
    var() bool bScaleWithVelocity;
    /** which bone we're setting params for. */
    var() SprayVelocityScaleParams VelocityScaleParams;

    structdefaultproperties
    {
        BoneName=None
        CachedBoneIndex=0
        bScaleIn=false
        ScaleInParams=(ScaleInTimeRange=(X=0,Y=0),ScaleRange=(X=0,Y=0),Pow=1)
        bScaleWithVelocity=false
        VelocityScaleParams=(VelocityRange=(X=0,Y=0),ScaleRange=(X=0,Y=0),Pow=1)
    }
};

/** transient properties */
var() transient float CurrentAge;
var() transient float CurrentVel;
var transient float LastVel;
/** Velocity is smoothed over time.  This controls how tightly it adheres to the actual velocity. */
var() protected float VelocitySmoothingInterpSpeed;
var() protected array<SprayBoneScaleParams> ScaleParams;

simulated function ResetTransients()
{
    CurrentAge = 0;
    CurrentVel = 0;
    LastVel = 0;
}

defaultproperties
{
    VelocitySmoothingInterpSpeed=8
}