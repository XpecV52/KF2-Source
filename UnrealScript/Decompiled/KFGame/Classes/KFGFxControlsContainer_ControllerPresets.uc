/*******************************************************************************
 * KFGFxControlsContainer_ControllerPresets generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFGFxControlsContainer_ControllerPresets extends KFGFxObject_Container within GFxMoviePlayer
    config(UI);

struct KeyBinding
{
    var string Key;
    var string Command;
    var string HoldCommand;

    structdefaultproperties
    {
        Key=""
        Command=""
        HoldCommand=""
    }
};

var const string InputSectionName;
var const string PackageName;
var const localized string MovementString;
var const localized string LookString;
var const localized string ShowScoardBoardString;
var const localized string ShowIngameMenuString;
var const localized string HoldString;
var config array<config KeyBinding> ControllerPreset0;
var byte CurrentLocalizedIndex;
var byte CurrentPresetIndex;

function Initialize(KFGFxObject_Menu NewParentMenu)
{
    super.Initialize(NewParentMenu);
    UpdateCurrentPresetArray(0);
}

function UpdateCurrentPresetArray(byte PresetIndex)
{
    if(PresetIndex != CurrentPresetIndex)
    {
        CurrentPresetIndex = PresetIndex;
        switch(CurrentPresetIndex)
        {
            case 0:
                LocalizeText(ControllerPreset0);
                break;
            default:
                break;
        }
    }
    else
    {
    }
}

function LocalizeText(out array<KeyBinding> PresetArray)
{
    local GFxObject LocalizedObject, BindingsArray;
    local byte I;

    CurrentLocalizedIndex = 0;
    LocalizedObject = Outer.CreateObject("Object");
    BindingsArray = Outer.CreateArray();
    LocalizedObject.SetString("leftThumbstick", MovementString);
    LocalizedObject.SetString("rightThumbstick", LookString);
    LocalizedObject.SetString("back", ShowScoardBoardString);
    LocalizedObject.SetString("start", ShowIngameMenuString);
    I = 0;
    J0x146:

    if(I < ControllerPreset0.Length)
    {
        AddBindingToGFxObject(BindingsArray, PresetArray[I].Key, PresetArray[I].Command, PresetArray[I].HoldCommand, I);
        ++ I;
        goto J0x146;
    }
    LocalizedObject.SetObject("bindings", BindingsArray);
    SetObject("localizedText", LocalizedObject);
}

function AddBindingToGFxObject(out GFxObject ObjectArray, string Key, string Command, string HoldCommand, byte I)
{
    local GFxObject TempObject;
    local string CommandString, HoldCommandString;

    TempObject = Outer.CreateObject("Object");
    CommandString = Localize(InputSectionName, Command, PackageName);
    if(HoldCommand != "")
    {
        HoldCommandString = Localize(InputSectionName, HoldCommand, PackageName);        
        HoldCommandString -= HoldString;
        CommandString = ((CommandString $ "
") $ HoldCommandString) @ HoldString;
    }
    TempObject.SetString("Key", Key);
    TempObject.SetString("Command", CommandString);
    ObjectArray.SetElementObject(I, TempObject);
}

defaultproperties
{
    InputSectionName="LocalizedControls"
    PackageName="KFGame"
    MovementString="Movement Control"
    LookString="Look Control"
    ShowScoardBoardString="Show Scoreboard"
    ShowIngameMenuString="Toggle In Game Menu"
    HoldString="(Hold)"
    ControllerPreset0(0)=(Key="rightTrigger",Command="GBA_Fire",HoldCommand="")
    ControllerPreset0(1)=(Key="leftTrigger",Command="GBA_IronSightsToggle",HoldCommand="GBA_IronSightsHold")
    ControllerPreset0(2)=(Key="rightBumper",Command="GBA_AltFire",HoldCommand="")
    ControllerPreset0(3)=(Key="leftBumper",Command="GBA_Grenade",HoldCommand="")
    ControllerPreset0(4)=(Key="l3",Command="GBA_SprintAndCrouch",HoldCommand="")
    ControllerPreset0(5)=(Key="r3",Command="GBA_Use",HoldCommand="")
    ControllerPreset0(6)=(Key="a",Command="GBA_Jump",HoldCommand="")
    ControllerPreset0(7)=(Key="b",Command="GBA_TertiaryFire",HoldCommand="")
    ControllerPreset0(8)=(Key="x",Command="GBA_Reload",HoldCommand="GBA_QuickHeal")
    ControllerPreset0(9)=(Key="y",Command="GBA_NextWeapon",HoldCommand="GBA_WeaponSelect_Gamepad")
    ControllerPreset0(10)=(Key="left",Command="GBA_ShowVoiceComms",HoldCommand="")
    ControllerPreset0(11)=(Key="right",Command="GBA_ShowVoiceComms",HoldCommand="")
    ControllerPreset0(12)=(Key="up",Command="GBA_TossMoney",HoldCommand="")
    ControllerPreset0(13)=(Key="down",Command="GBA_ToggleFlashlight",HoldCommand="")
    CurrentPresetIndex=255
}