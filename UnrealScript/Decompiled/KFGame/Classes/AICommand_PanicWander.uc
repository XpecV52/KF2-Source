/*******************************************************************************
 * AICommand_PanicWander generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class AICommand_PanicWander extends AICommand_HeadlessWander within KFAIController;

static function bool PanicWander(KFAIController AI)
{
    local AICommand_PanicWander Cmd;

    if(AI != none)
    {
        Cmd = new (AI) Class'AICommand_PanicWander';
        if(Cmd != none)
        {
            AI.PushCommand(Cmd);
            return true;
        }
    }
    return false;
}

function Resumed(name OldCommandName)
{
    if((Outer.MyKFPawn != none) && !Outer.MyKFPawn.ShouldBeWandering())
    {
        Outer.AbortCommand(self);
        return;
    }
    super(AICommand).Resumed(OldCommandName);
}

function EndWander(KFAIController AI)
{
    if(AI != none)
    {
        Status = 'Success';
        Outer.PopCommand(self);
    }
}

function Popped()
{
    if(Outer.MyKFPawn != none)
    {
        Outer.MyKFPawn.bCanJumpOverWalls = Outer.MyKFPawn.default.bCanJumpOverWalls;
        Outer.RotationRateMultiplier = Outer.default.RotationRateMultiplier;
        Outer.EnableMeleeRangeEventProbing();
        if(Outer.MyKFPawn.IsDoingSpecialMove())
        {
            Outer.MyKFPawn.EndSpecialMove();
        }
    }
    super.Popped();
}
