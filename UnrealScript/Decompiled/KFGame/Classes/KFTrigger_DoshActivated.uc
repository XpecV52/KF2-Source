/*******************************************************************************
 * KFTrigger_DoshActivated generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFTrigger_DoshActivated extends KFTrigger_MinigameButton
    hidecategories(Navigation);

var() int ActivationCost;

simulated function int GetInteractionIndex(Pawn User)
{
    return 10;
}

function bool UsedBy(Pawn User)
{
    local KFPlayerController KFPC;

    KFPC = KFPlayerController(User.Controller);
    if(KFPC.PlayerReplicationInfo.Score < float(ActivationCost))
    {
        return false;
    }
    return super.UsedBy(User);
}

function ActivateGame()
{
    local KFPlayerController KFPC;
    local KFPlayerReplicationInfo KFPRI;

    if(LastActivatingUser == none)
    {
        return;
    }
    KFPC = KFPlayerController(LastActivatingUser.Controller);
    KFPRI = KFPlayerReplicationInfo(KFPC.PlayerReplicationInfo);
    if(ReadyToActivate())
    {
        if(KFPRI != none)
        {
            KFPRI.AddDosh(-ActivationCost);
        }
        super.ActivateGame();
    }
}

defaultproperties
{
    ActivationCost=100
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFTrigger_DoshActivated.CollisionCylinder'
    CylinderComponent=CollisionCylinder
    begin object name=Sprite class=SpriteComponent
        ReplacementPrimitive=none
    object end
    // Reference: SpriteComponent'Default__KFTrigger_DoshActivated.Sprite'
    Components(0)=Sprite
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFTrigger_DoshActivated.CollisionCylinder'
    Components(1)=CollisionCylinder
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFTrigger_DoshActivated.CollisionCylinder'
    CollisionComponent=CollisionCylinder
}