/*******************************************************************************
 * KFCharacterInfo_Monster generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFCharacterInfo_Monster extends KFCharacterInfoBase
    native(Pawn)
    hidecategories(Object);

struct native DoorSoundFx
{
    var() AkEvent Metal;
    var() AkEvent Wood;

    structdefaultproperties
    {
        Metal=none
        Wood=none
    }
};

struct native MeleeSpecialDismembermentInfo
{
    /** Settings for special melee dismeberment such as being able to split a character in half */
    var() bool bAllowHorizontalSplit;
    /** Settings for special melee dismeberment such as being able to split a character in half */
    var() name SpineBoneName<EditCondition=bAllowHorizontalSplit>;
    /** Settings for special melee dismeberment such as being able to split a character in half */
    var() bool bAllowVerticalSplit;
    /** Settings for special melee dismeberment such as being able to split a character in half */
    var() name LeftShoulderBoneName<EditCondition=bAllowVerticalSplit>;
    /** Settings for special melee dismeberment such as being able to split a character in half */
    var() name RightShoulderBoneName<EditCondition=bAllowVerticalSplit>;

    structdefaultproperties
    {
        bAllowHorizontalSplit=false
        SpineBoneName=None
        bAllowVerticalSplit=false
        LeftShoulderBoneName=None
        RightShoulderBoneName=None
    }
};

/** Character mesh to use */
var(ThirdPerson) SkeletalMesh CharacterMesh<DisplayName=Body Mesh>;
var(ThirdPerson) array<MaterialInterface> PlayerControlledSkins;
var(ThirdPerson) array<MaterialInterface> PlayerControlledGoreSkins;
/** Aggressively optimized mesh for the server with minimal bones */
var(Server) SkeletalMesh ServerMesh;
/** Additional material IDs that require MICs for gameplay material params */
var(Effects) array<int> ExtraMICIndices;
var(Effects) DoorSoundFx DoorHitSound;
var MaterialInstance BloodSplatterDecalMaterial;
/** Gore mesh with alternate bone weights */
var(Gore) SkeletalMesh GoreMesh;
/**  
 *Gore settings for bones that can be dismembered.
 *       ALL HITZONE BONES MUST BE INCLUDED EVEN IF THEY CANNOT BE DISMEMBERED
 */
var(Gore) editinline array<editinline KFGoreJointInfo> GoreJointSettings;
/** Gore chunk attachment settings for the mesh */
var(Gore) editinline array<editinline KFGoreChunkAttachmentInfo> GoreChunkAttachments;
/** Giblets to spawn on obliteration */
var(Gore) editinline array<editinline KFGibletInfo> GibletSettings;
/** Use for special melee dismeberment settings such as being able to split a character in half */
var(Gore) MeleeSpecialDismembermentInfo SpecialMeleeDismemberment;
/** Additional particle effect to be spawned for an explosion (if any) */
var(Gore) ParticleSystem ExplosionEffectTemplate<DisplayName=Gib Explosion Template>;
/** Particle effect to be spawned on obliteration */
var(Gore) ParticleSystem ObliterationEffectTemplate<DisplayName=Obliteration Effect Template>;
/** Particle effect to be spawned when knocked down, stunned, etc */
var(Effects) ParticleSystem DazedEffectTemplate<DisplayName=Stunned/Knocked Down Effect Template>;
/**  
 *Use to scale the number of gibs when the character explodes. Values greater than 1
 *       scale up, and values smaller than 0 scale down. Must be greater than 0. This is for
 *       actual grenade (or other explosive) based explosions. It has no effect on explosions
 *       triggered by Explosion Joints
 */
var(Gore) float ExplosionGibScale<DisplayName=Num Gibs Scale|UIMin=0|ClampMin=0|UIMax=10.0|ClampMax=10.0>;
/**  
 *Use to scale the impulse applied to gibs when the character explodes. Values greater than 1
 *       scale up, and values smaller than 0 scale down. Must be greater than 0. This affects both
 *       grenade based explosions and explosions triggered by Explosion Joints
 */
var(Gore) float ExplosionImpulseScale<DisplayName=Gib Impulse Scale|UIMin=0|ClampMin=0|UIMax=20.0|ClampMax=20.0>;

simulated function SetCharacterMeshFromArch(KFPawn KFP, optional KFPlayerReplicationInfo KFPRI)
{
    local int I, MaterialIndex;

    super.SetCharacterMeshFromArch(KFP, KFPRI);
    if(CharacterMesh != none)
    {
        KFP.DetachComponent(KFP.ThirdPersonHeadMeshComponent);
        I = 0;
        J0x74:

        if(I < 3)
        {
            KFP.DetachComponent(KFP.ThirdPersonAttachments[I]);
            ++ I;
            goto J0x74;
        }
        if((KFP.WorldInfo.NetMode == NM_DedicatedServer) && ServerMesh != none)
        {
            KFP.Mesh.SetSkeletalMesh(ServerMesh);            
        }
        else
        {
            KFP.Mesh.SetSkeletalMesh(CharacterMesh);
        }
        KFP.Mesh.SetScale(DefaultMeshScale);
        if(KFP.UsePlayerControlledZedSkin())
        {
            I = 0;
            J0x211:

            if(I < PlayerControlledSkins.Length)
            {
                KFP.Mesh.SetMaterial(I, PlayerControlledSkins[I]);
                ++ I;
                goto J0x211;
            }
        }
    }
    if((KFP.WorldInfo.NetMode != NM_DedicatedServer) && KFP.Mesh != none)
    {
        KFP.CharacterMICs.Length = 0;
        KFP.CharacterMICs[0] = KFP.Mesh.CreateAndSetMaterialInstanceConstant(0);
        foreach ExtraMICIndices(MaterialIndex,)
        {
            KFP.CharacterMICs.AddItem(KFP.Mesh.CreateAndSetMaterialInstanceConstant(MaterialIndex);            
        }        
    }
}

defaultproperties
{
    ExplosionGibScale=1
    ExplosionImpulseScale=1
}