/*******************************************************************************
 * KFKActorSpawnable_Door generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFKActorSpawnable_Door extends KFKActorSpawnable;

event OnSleepRBPhysics()
{
    HideNonFlatMesh();
}

simulated function HideNonFlatMesh()
{
    if(!CheckOnFlatGround())
    {
        StaticMeshComponent.SetActorCollision(false, false);
        if((WorldInfo.TimeSeconds - LastRenderTime) > 1)
        {
            StaticMeshComponent.SetHidden(true);            
        }
        else
        {
            SetTimer(1, false, 'HideNonFlatMesh', self);
        }
    }
}

function bool CheckOnFlatGround()
{
    local Vector DoorX, DoorY, DoorZ;

    GetAxes(Rotation, DoorX, DoorY, DoorZ);
    return ((DoorX.Z < 0.95) ? false : true);
}

defaultproperties
{
    begin object name=StaticMeshComponent0 class=StaticMeshComponent
        ReplacementPrimitive=none
        LightEnvironment=DynamicLightEnvironmentComponent'Default__KFKActorSpawnable_Door.MyLightEnvironment'
    object end
    // Reference: StaticMeshComponent'Default__KFKActorSpawnable_Door.StaticMeshComponent0'
    StaticMeshComponent=StaticMeshComponent0
    LightEnvironment=DynamicLightEnvironmentComponent'Default__KFKActorSpawnable_Door.MyLightEnvironment'
    Components(0)=DynamicLightEnvironmentComponent'Default__KFKActorSpawnable_Door.MyLightEnvironment'
    begin object name=StaticMeshComponent0 class=StaticMeshComponent
        ReplacementPrimitive=none
        LightEnvironment=DynamicLightEnvironmentComponent'Default__KFKActorSpawnable_Door.MyLightEnvironment'
    object end
    // Reference: StaticMeshComponent'Default__KFKActorSpawnable_Door.StaticMeshComponent0'
    Components(1)=StaticMeshComponent0
    bCallRigidBodyWakeEvents=true
    LifeSpan=0
    begin object name=StaticMeshComponent0 class=StaticMeshComponent
        ReplacementPrimitive=none
        LightEnvironment=DynamicLightEnvironmentComponent'Default__KFKActorSpawnable_Door.MyLightEnvironment'
    object end
    // Reference: StaticMeshComponent'Default__KFKActorSpawnable_Door.StaticMeshComponent0'
    CollisionComponent=StaticMeshComponent0
}