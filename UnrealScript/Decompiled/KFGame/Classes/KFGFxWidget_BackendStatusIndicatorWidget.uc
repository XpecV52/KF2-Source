/*******************************************************************************
 * KFGFxWidget_BackendStatusIndicatorWidget generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFGFxWidget_BackendStatusIndicatorWidget extends KFGFxObject_Container within GFxMoviePlayer;

var const localized string BackendStatusIndicatorString;
var bool bConnectedToItemGrantingServer;

function Init()
{
    Class'WorldInfo'.static.GetWorldInfo().TimerHelper.SetTimer(60, true, 'Timer_CheckIsConnectedToItemGrantingServer', self);
    Timer_CheckIsConnectedToItemGrantingServer();
    LocalizeText();
}

function StartFlickeringConnectionLost()
{
    ActionScriptVoid("startDisconnectionAnimation");
}

function StopFlickeringConnectionLost()
{
    ActionScriptVoid("stopDisconnectionAnimation");
}

function Timer_CheckIsConnectedToItemGrantingServer()
{
    bConnectedToItemGrantingServer = Class'KFGameEngine'.static.IsLastRefreshTweakParamsSuccessful();
    if(bConnectedToItemGrantingServer)
    {
        StopFlickeringConnectionLost();        
    }
    else
    {
        StartFlickeringConnectionLost();
    }
}

function LocalizeText()
{
    local GFxObject LocalizedObject;

    LocalizedObject = Outer.CreateObject("Object");
    LocalizedObject.SetString("backendStatusIndicatorString", BackendStatusIndicatorString);
    SetObject("localizedText", LocalizedObject);
}

defaultproperties
{
    BackendStatusIndicatorString="ITEM SERVER CONNECTION"
}