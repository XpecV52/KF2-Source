/*******************************************************************************
 * KFGameViewportClient generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFGameViewportClient extends GameViewportClient within Engine
    transient
    native(UI)
    config(Engine);

var string ErrorTitle;
var string ErrorMessage;
var string LastConnectionAttemptAddress;
var const localized array<localized string> RandomLoadingStrings;
var Font MessageFont;
var float FontScale;

function NotifyConnectionError(Engine.PlayerController.EProgressMessageType MessageType, optional string Message, optional string Title)
{
    local KFGameEngine KFGEngine;

    Message = Localize("Errors", "ConnectionFailed", "Engine");
    Title = Localize("Errors", "ConnectionFailed_Title", "Engine");
    KFGEngine = KFGameEngine(Class'KFGameEngine'.static.GetEngine());
    if(ErrorTitle == "")
    {
        ErrorTitle = Class'KFLocalMessage'.static.getLocalized(Title);
        ErrorMessage = Class'KFLocalMessage'.static.getLocalized(Message);
        KFGEngine.SetLastConnectionError(Message, Title);
    }
    super.NotifyConnectionError(MessageType, Message, Title);
}

event PreBrowse(string Address)
{
    LastConnectionAttemptAddress = Address;
}

function GetErrorMessage(out string outTitle, out string outMessage)
{
    outTitle = ErrorTitle;
    outMessage = ErrorMessage;
    ErrorTitle = "";
    ErrorMessage = "";
}

function DrawTransition(Canvas Canvas)
{
    local string RandomLoadingString;

    switch(Outer.TransitionType)
    {
        case 2:
            RandomLoadingString = GetRandomLoadingMessage();
            DrawTransitionMessage(Canvas, RandomLoadingString);
            break;
        default:
            break;
    }
}

function string GetRandomLoadingMessage()
{
    return RandomLoadingStrings[Rand(RandomLoadingStrings.Length)];
}

function DrawTransitionMessage(Canvas Canvas, string Message)
{
    return;
    super.DrawTransitionMessage(Canvas, Message);
}

defaultproperties
{
    RandomLoadingStrings(0)="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in lacinia odio. Integer egestas, tortor in dignissim aliquam, sem libero gravida felis, quis porta sem massa at nunc. Aliquam in nulla et libero auctor convallis. Mauris ultrices eros sed tellus egestas luctus. Vivamus ut laoreet erat. Etiam ut pharetra mi. Curabitur semper nulla vitae eros ornare tristique 0"
    RandomLoadingStrings(1)="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in lacinia odio. Integer egestas, tortor in dignissim aliquam, sem libero gravida felis, quis porta sem massa at nunc. Aliquam in nulla et libero auctor convallis. Mauris ultrices eros sed tellus egestas luctus. Vivamus ut laoreet erat. Etiam ut pharetra mi. Curabitur semper nulla vitae eros ornare tristique 1"
    RandomLoadingStrings(2)="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in lacinia odio. Integer egestas, tortor in dignissim aliquam, sem libero gravida felis, quis porta sem massa at nunc. Aliquam in nulla et libero auctor convallis. Mauris ultrices eros sed tellus egestas luctus. Vivamus ut laoreet erat. Etiam ut pharetra mi. Curabitur semper nulla vitae eros ornare tristique 2"
    RandomLoadingStrings(3)="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in lacinia odio. Integer egestas, tortor in dignissim aliquam, sem libero gravida felis, quis porta sem massa at nunc. Aliquam in nulla et libero auctor convallis. Mauris ultrices eros sed tellus egestas luctus. Vivamus ut laoreet erat. Etiam ut pharetra mi. Curabitur semper nulla vitae eros ornare tristique 3"
    RandomLoadingStrings(4)="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in lacinia odio. Integer egestas, tortor in dignissim aliquam, sem libero gravida felis, quis porta sem massa at nunc. Aliquam in nulla et libero auctor convallis. Mauris ultrices eros sed tellus egestas luctus. Vivamus ut laoreet erat. Etiam ut pharetra mi. Curabitur semper nulla vitae eros ornare tristique 4"
    RandomLoadingStrings(5)="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec in lacinia odio. Integer egestas, tortor in dignissim aliquam, sem libero gravida felis, quis porta sem massa at nunc. Aliquam in nulla et libero auctor convallis. Mauris ultrices eros sed tellus egestas luctus. Vivamus ut laoreet erat. Etiam ut pharetra mi. Curabitur semper nulla vitae eros ornare tristique 5"
    MessageFont=Font'UI_Canvas_Fonts.Font_General_Small'
    FontScale=0.5
}