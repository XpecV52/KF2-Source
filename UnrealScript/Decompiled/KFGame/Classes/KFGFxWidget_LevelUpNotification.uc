/*******************************************************************************
 * KFGFxWidget_LevelUpNotification generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFGFxWidget_LevelUpNotification extends GFxObject within GFxMoviePlayer;

var const localized string LevelUpString;
var const localized string TierUnlockedString;
var const localized string ObjectiveCompleteString;

function InitializeHUD();

function setLocalizedText()
{
    local GFxObject TempObj;

    TempObj = Outer.CreateObject("Object");
    TempObj.SetString("levelUpString", LevelUpString);
    TempObj.SetString("tierUnlockedString", TierUnlockedString);
    SetObject("localizeText", TempObj);
}

function FinishedDailyEvent(int EventIndex)
{
    local KFPlayerController MyKFPC;
    local DailyEventInformation EventInfo;

    MyKFPC = KFPlayerController(Outer.GetPC());
    if(MyKFPC == none)
    {
        return;
    }
    EventInfo = MyKFPC.GetDailyObjective(EventIndex);
    ShowAchievementNotification(ObjectiveCompleteString, Class'KFGFxDailyObjectivesContainer'.static.FormTitleForObjective(EventInfo), Class'KFGFxDailyObjectivesContainer'.static.FormDescriptionForObjective(EventInfo), Class'KFGFxDailyObjectivesContainer'.static.GetIconForObjective(EventInfo), true);
    Class'KFMusicStingerHelper'.static.PlayDailyCompleteStinger(Outer.GetPC());
}

function FinishedSpecialEvent(int EventIndex, int ObjectiveIndex)
{
    local class<KFGFxSpecialEventObjectivesContainer> SpecialEventClass;

    SpecialEventClass = Class'KFGFxMenu_StartGame'.static.GetSpecialEventClass(EventIndex);
    ShowObjectiveCompleteNotification(SpecialEventClass.default.SpecialEventObjectiveInfoList[ObjectiveIndex].TitleString, SpecialEventClass.default.SpecialEventObjectiveInfoList[ObjectiveIndex].DescriptionString, "img://" $ SpecialEventClass.default.ObjectiveIconURLs[ObjectiveIndex]);
    Class'KFMusicStingerHelper'.static.PlaySpecialEventObjectiveStinger(Outer.GetPC());
}

function ShowLevelUpNotification(class<KFPerk> PerkClass, byte PerkLevel, bool bTierUnlocked)
{
    ShowAchievementNotification(LevelUpString, PerkClass.default.PerkName, TierUnlockedString, "img://" $ PerkClass.static.GetPerkIconPath(), bTierUnlocked, PerkLevel);
}

function ShowObjectiveCompleteNotification(string ObjectiveName, string ObjectiveDescription, string ImagePath, optional bool bShowSecondary)
{
    ShowAchievementNotification(ObjectiveCompleteString, ObjectiveName, " ", ImagePath, bShowSecondary, -1);
}

function ShowAchievementNotification(string TitleString, string MainString, string SecondaryString, string ImagePath, bool bShowSecondary, optional int NumericValue)
{
    local GFxObject TempObj;

    NumericValue = -1;
    TempObj = Outer.CreateObject("Object");
    TempObj.SetString("titleString", TitleString);
    TempObj.SetString("mainString", MainString);
    TempObj.SetString("secondaryString", SecondaryString);
    TempObj.SetInt("newValue", NumericValue);
    TempObj.SetString("iconPath", ImagePath);
    TempObj.SetBool("bShowSecondary", bShowSecondary);
    SetObject("showAchievementPopUp", TempObj);
}

defaultproperties
{
    LevelUpString="LEVEL UP"
    TierUnlockedString="NEW SKILLS UNLOCKED"
    ObjectiveCompleteString="OBJECTIVE COMPLETE"
}