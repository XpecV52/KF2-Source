/*******************************************************************************
 * KFCameraLensEmit_RackemHeadShot generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFCameraLensEmit_RackemHeadShot extends EmitterCameraLensEffectBase
    hidecategories(Navigation);

var InterpCurveFloat FOVCurve;

simulated function ActivateLensEffect()
{
    local Vector2D ViewportSize;
    local PlayerController LocalPC;
    local LocalPlayer LP;
    local float ScaledFOV, AspectRatio, AspectRatioScale;

    super.ActivateLensEffect();
    ScaledFOV = 96.25;
    LocalPC = GetALocalPlayerController();
    if(LocalPC != none)
    {
        LP = LocalPlayer(LocalPC.Player);
        if((LP != none) && LP.ViewportClient != none)
        {
            LP.ViewportClient.GetViewportSize(ViewportSize);
            AspectRatio = ViewportSize.X / ViewportSize.Y;
            AspectRatioScale = AspectRatio / 1.77778;
            ScaledFOV = EvalInterpCurveFloat(FOVCurve, AspectRatioScale);
        }
    }
    KFParticleSystemComponent(ParticleSystemComponent).SetFOV(ScaledFOV);
}

defaultproperties
{
    FOVCurve=(Points=/* Array type was not detected. */,InVal=0.7,OutVal=47,ArriveTangent=0,LeaveTangent=0,InterpMode=EInterpCurveMode.CIM_Linear)
    PS_CameraEffect=ParticleSystem'FX_Camera_EMIT.FX_Rackem_Headshot_01'
    bAllowMultipleInstances=true
    begin object name=ParticleSystemComponent1 class=KFParticleSystemComponent
        SecondsBeforeInactive=0
        ReplacementPrimitive=none
        bOnlyOwnerSee=true
    object end
    // Reference: KFParticleSystemComponent'Default__KFCameraLensEmit_RackemHeadShot.ParticleSystemComponent1'
    ParticleSystemComponent=ParticleSystemComponent1
    bDepthTestEnabled=false
    begin object name=ParticleSystemComponent1 class=KFParticleSystemComponent
        SecondsBeforeInactive=0
        ReplacementPrimitive=none
        bOnlyOwnerSee=true
    object end
    // Reference: KFParticleSystemComponent'Default__KFCameraLensEmit_RackemHeadShot.ParticleSystemComponent1'
    Components(0)=ParticleSystemComponent1
    LifeSpan=0.5
}