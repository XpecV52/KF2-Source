/*******************************************************************************
 * KFProj_PinningBullet generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFProj_PinningBullet extends KFProj_RicochetBullet
    abstract
    hidecategories(Navigation);

var RB_ConstraintActor PinConstraint;
var bool bPinned;
var bool bSpawnedForPin;

static function bool CreatePin(KFPawn DeadPawn, Vector InitialHitLocation, Vector Direction, name HitBoneName)
{
    local KFProj_PinningBullet PinProjectile;
    local Vector BoneLoc;
    local class<KFProj_PinningBullet> BulletClass;

    return false;
    if((((((((DeadPawn != none) && DeadPawn.WorldInfo.GRI.ShouldShowGore()) && !DeadPawn.bDeleteMe) && DeadPawn.Health <= 0) && DeadPawn.Physics == 10) && DeadPawn.Mesh != none) && DeadPawn.Mesh.PhysicsAssetInstance != none) && HitBoneName != 'None')
    {
        BoneLoc = DeadPawn.Mesh.GetBoneLocation(HitBoneName);
        BulletClass = default.Class;
        PinProjectile = DeadPawn.Spawn(BulletClass,,, BoneLoc, rotator(Direction));
        if(PinProjectile != none)
        {
            PinProjectile.bSpawnedForPin = true;
            PinProjectile.Init(Direction);
            PinProjectile.PinVictim(DeadPawn, HitBoneName);
            return true;
        }
    }
    return false;
}

simulated function PinVictim(KFPawn Victim, name VictimBone)
{
    bSwitchToZeroCollision = false;
    CylinderComponent.SetCylinderSize(1, 1);
    CylinderComponent.SetActorCollision(true, false);
    SetLocation(Victim.Mesh.GetBoneLocation(VictimBone));
    PinConstraint = Spawn(Class'RB_ConstraintActorSpawnable',,, Location);
    PinConstraint.SetBase(self);
    PinConstraint.InitConstraint(self, Victim, 'None', VictimBone, 2000);
    PinConstraint.LifeSpan = 8;
    LifeSpan = 8;
    bPinned = true;
}

defaultproperties
{
    AmbientComponent=AkComponent'Default__KFProj_PinningBullet.AmbientAkSoundComponent'
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_PinningBullet.CollisionCylinder'
    CylinderComponent=CollisionCylinder
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_PinningBullet.CollisionCylinder'
    Components(0)=CollisionCylinder
    Components(1)=AkComponent'Default__KFProj_PinningBullet.AmbientAkSoundComponent'
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_PinningBullet.CollisionCylinder'
    CollisionComponent=CollisionCylinder
}