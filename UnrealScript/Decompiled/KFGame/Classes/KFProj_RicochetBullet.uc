/*******************************************************************************
 * KFProj_RicochetBullet generated by Eliot.UELib using UE Explorer.
 * Eliot.UELib ? 2009-2022 Eliot van Uytfanghe. All rights reserved.
 * http://eliotvu.com
 *
 * All rights belong to their respective owners.
 *******************************************************************************/
class KFProj_RicochetBullet extends KFProj_Bullet
    abstract
    hidecategories(Navigation);

var int BouncesLeft;
var float DampingFactor;
var KFImpactEffectInfo RicochetEffects;

simulated function bool Bounce(Vector HitNormal, Actor BouncedOff)
{
    if(BouncesLeft > 0)
    {
        Velocity = DampingFactor * (Velocity - ((2 * HitNormal) * (Velocity Dot HitNormal)));
        BouncesLeft = BouncesLeft - 1;
        if(WorldInfo.NetMode != NM_DedicatedServer)
        {
            KFImpactEffectManager(WorldInfo.MyImpactEffectManager).PlayImpactEffects(Location, Instigator, HitNormal, RicochetEffects, true);
        }
        LastBounced.Actor = BouncedOff;
        LastBounced.Time = WorldInfo.TimeSeconds;
        return true;
    }
    return false;
}

defaultproperties
{
    BouncesLeft=2
    DampingFactor=0.65
    AmbientComponent=AkComponent'Default__KFProj_RicochetBullet.AmbientAkSoundComponent'
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_RicochetBullet.CollisionCylinder'
    CylinderComponent=CollisionCylinder
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_RicochetBullet.CollisionCylinder'
    Components(0)=CollisionCylinder
    Components(1)=AkComponent'Default__KFProj_RicochetBullet.AmbientAkSoundComponent'
    bBounce=true
    begin object name=CollisionCylinder class=CylinderComponent
        ReplacementPrimitive=none
    object end
    // Reference: CylinderComponent'Default__KFProj_RicochetBullet.CollisionCylinder'
    CollisionComponent=CollisionCylinder
}